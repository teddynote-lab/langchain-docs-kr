---
title: '인증 설정'
description: 'Open Agent Platform의 인증 구성하기'
---

Open Agent Platform이 사용하도록 구성된 기본 인증 제공자는 Supabase입니다.

## Supabase 설정하기

Supabase 인증을 설정하려면 먼저 새 Supabase 프로젝트를 생성해야 합니다. 새 프로젝트를 생성한 후, `apps/web/` 디렉토리 내에 다음 환경 변수를 설정하세요:

```bash
NEXT_PUBLIC_SUPABASE_URL="<your supabase url>"
NEXT_PUBLIC_SUPABASE_ANON_KEY="<your supabase anon key>"
```

또한 Supabase 프로젝트에서 Google 인증을 활성화해야 합니다. Google로 가입하는 것을 허용하지 않으려면, 환경 변수에 `NEXT_PUBLIC_GOOGLE_AUTH_DISABLED=true`를 설정하여 UI에서 Google을 인증 옵션으로 표시하지 않도록 비활성화할 수 있습니다.

## LangGraph Server 인증

사전 구축된 LangGraph agent들은 커스텀 인증을 구현하므로, 요청 시 LangSmith API key를 지정할 필요가 없습니다. 대신, 요청의 `Authorization` header에 사용자의 Supabase access token(JWT token)을 전달합니다.

LangGraph server의 auth middleware 내부에서 이 token을 추출하고 Supabase로 유효성을 검증합니다. 유효한 경우, user ID를 받게 되며, 이는 각 사용자가 *오직* 자신의 agent와 thread에만 접근할 수 있도록 검증하는 데 사용됩니다. 사용자가 자신이 생성하지 않은 agent에 접근할 수 있도록 허용하려면, LangGraph server의 커스텀 인증 middleware를 업데이트하여 사용자가 접근할 수 있도록 하려는 agent에 대한 접근을 허용해야 합니다.

`Authorization` header와 함께, `x-supabase-access-token` header를 통해 Supabase JWT를 중복으로 전달합니다. 이는 `x-`로 시작하는 LangGraph server로 전송되는 모든 LangSmith 특정 header가 아닌 header들이 thread의 configurable field에 포함되기 때문입니다. 나중에 MCP server로 인증하기 위해 이 JWT가 필요합니다.

## LangSmith API Key 인증

LangGraph server에서 커스텀 인증을 사용하지 *않고*, 대신 누구나 agent에 접근할 수 있도록 허용하려면, `NEXT_PUBLIC_USE_LANGSMITH_AUTH` 환경 변수를 `true`로 설정하고, `apps/web/` 디렉토리 내의 환경 변수에 `LANGSMITH_API_KEY`를 설정하면 됩니다.

마지막으로, `NEXT_PUBLIC_BASE_API_URL` 환경 변수를 **web** server의 base API URL로 설정했는지 확인하세요. 로컬 개발의 경우, 다음과 같이 설정해야 합니다:

```bash
NEXT_PUBLIC_BASE_API_URL="http://localhost:3000/api"
```

이렇게 하면 web client로 전송되는 모든 요청이 먼저 proxy route를 통과하게 되며, 이 route는 server에서 LangSmith API key를 요청에 주입하여 API key가 client에 노출되지 않도록 합니다. 그런 다음 요청은 LangGraph server로 전달됩니다.

<Warning>
LangSmith API key 환경 변수에 `NEXT_PUBLIC_` 접두사를 붙이지 *않도록* 주의하세요. 이는 **비밀**이며 절대 client에 노출되어서는 안 됩니다.
</Warning>

## RAG 인증

web client에서 LangConnect RAG server로 인증하는 것은 LangGraph 인증과 유사한 방식으로 처리됩니다. 요청의 `Authorization` header에 Supabase JWT를 전달합니다. 그런 다음 LangConnect RAG server 내부에서 이 token을 추출하고 Supabase로 유효성을 검증합니다.

유효한 경우, user ID를 받게 되며, 이는 각 사용자가 *오직* 자신의 collection에만 접근할 수 있도록 검증하는 데 사용됩니다. 현재 사용자 간 collection 공유는 지원하지 않습니다.

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/labs/oap/setup/authentication.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
