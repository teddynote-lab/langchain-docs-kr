---
title: Turbopuffer
---

## Setup

먼저 [여기](https://turbopuffer.com/join)에서 Turbopuffer 계정에 가입해야 합니다.
그런 다음 계정을 만든 후 API key를 생성할 수 있습니다.

API key를 환경 변수로 설정하세요:

```bash
export TURBOPUFFER_API_KEY=<YOUR_API_KEY>
```

## Usage

```typescript
import { OpenAIEmbeddings } from "@langchain/openai";
import { TurbopufferVectorStore } from "@langchain/community/vectorstores/turbopuffer";

const embeddings = new OpenAIEmbeddings();

const store = new TurbopufferVectorStore(embeddings, {
  apiKey: process.env.TURBOPUFFER_API_KEY,
  namespace: "my-namespace",
});

const createdAt = new Date().getTime();

// Add some documents to your store.
// Currently, only string metadata values are supported.
const ids = await store.addDocuments([
  {
    pageContent: "some content",
    metadata: { created_at: createdAt.toString() },
  },
  { pageContent: "hi", metadata: { created_at: (createdAt + 1).toString() } },
  { pageContent: "bye", metadata: { created_at: (createdAt + 2).toString() } },
  {
    pageContent: "what's this",
    metadata: { created_at: (createdAt + 3).toString() },
  },
]);

// Retrieve documents from the store
const results = await store.similaritySearch("hello", 1);

console.log(results);
/*
  [
    Document {
      pageContent: 'hi',
      metadata: { created_at: '1705519164987' }
    }
  ]
*/

// Filter by metadata
// See https://turbopuffer.com/docs/reference/query#filter-parameters for more on
// allowed filters
const results2 = await store.similaritySearch("hello", 1, {
  created_at: [["Eq", (createdAt + 3).toString()]],
});

console.log(results2);

/*
  [
    Document {
      pageContent: "what's this",
      metadata: { created_at: '1705519164989' }
    }
  ]
*/

// Upsert by passing ids
await store.addDocuments(
  [
    { pageContent: "changed", metadata: { created_at: createdAt.toString() } },
    {
      pageContent: "hi changed",
      metadata: { created_at: (createdAt + 1).toString() },
    },
    {
      pageContent: "bye changed",
      metadata: { created_at: (createdAt + 2).toString() },
    },
    {
      pageContent: "what's this changed",
      metadata: { created_at: (createdAt + 3).toString() },
    },
  ],
  { ids }
);

// Filter by metadata
const results3 = await store.similaritySearch("hello", 10, {
  created_at: [["Eq", (createdAt + 3).toString()]],
});

console.log(results3);

/*
  [
    Document {
      pageContent: "what's this changed",
      metadata: { created_at: '1705519164989' }
    }
  ]
*/

// Remove all vectors from the namespace.
await store.delete({
  deleteIndex: true,
});
```

## Related

- Vector store [개념 가이드](/oss/javascript/integrations/vectorstores)
- Vector store [사용 방법 가이드](/oss/javascript/integrations/vectorstores)

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/vectorstores/turbopuffer.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
