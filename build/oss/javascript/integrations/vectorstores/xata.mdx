---
title: Xata
---

[Xata](https://xata.io)는 PostgreSQL 기반의 serverless 데이터 플랫폼입니다. 데이터베이스와 상호작용하기 위한 type-safe TypeScript/JavaScript SDK와 데이터 관리를 위한 UI를 제공합니다.

Xata는 네이티브 vector type을 가지고 있으며, 이는 모든 테이블에 추가할 수 있고 유사도 검색을 지원합니다. LangChain은 vector를 Xata에 직접 삽입하고, 주어진 vector의 최근접 이웃을 쿼리하므로, 모든 LangChain Embeddings 통합을 Xata와 함께 사용할 수 있습니다.

## Setup

### Xata CLI 설치

```bash
npm install @xata.io/cli -g
```

### vector store로 사용할 데이터베이스 생성

[Xata UI](https://app.xata.io)에서 새 데이터베이스를 생성합니다. 원하는 이름을 지정할 수 있지만, 이 예제에서는 `langchain`을 사용하겠습니다.
테이블을 생성하고, 역시 원하는 이름을 지정할 수 있지만 여기서는 `vectors`를 사용하겠습니다. UI를 통해 다음 컬럼들을 추가합니다:

- `content` (타입: "Text"). `Document.pageContent` 값을 저장하는 데 사용됩니다.
- `embedding` (타입: "Vector"). 사용할 모델의 차원을 사용합니다 (OpenAI의 경우 1536).
- metadata로 사용하고 싶은 다른 컬럼들. 이들은 `Document.metadata` 객체로부터 채워집니다. 예를 들어, `Document.metadata` 객체에 `title` 속성이 있다면, 테이블에 `title` 컬럼을 생성하면 자동으로 채워집니다.

### 프로젝트 초기화

프로젝트에서 다음을 실행합니다:

```bash
xata init
```

그런 다음 위에서 생성한 데이터베이스를 선택합니다. 이렇게 하면 데이터베이스와 상호작용하는 데 사용할 수 있는 client를 정의하는 `xata.ts` 또는 `xata.js` 파일도 생성됩니다. Xata JavaScript/TypeScript SDK 사용에 대한 자세한 내용은 [Xata 시작 가이드 문서](https://xata.io/docs/getting-started/installation)를 참조하세요.

## Usage

<Tip>
LangChain 패키지 설치에 대한 일반적인 지침은 [이 섹션](/oss/javascript/langchain/install)을 참조하세요.
</Tip>

```bash npm
npm install @langchain/openai @langchain/community @langchain/core
```

### 예제: OpenAI와 Xata를 vector store로 사용하는 Q&A 챗봇

이 예제는 `VectorDBQAChain`을 사용하여 Xata에 저장된 문서를 검색한 다음, 사용자가 질문한 내용에 답변하기 위해 이를 context로 OpenAI 모델에 전달합니다.

```typescript
import { XataVectorSearch } from "@langchain/community/vectorstores/xata";
import { OpenAIEmbeddings, OpenAI } from "@langchain/openai";
import { BaseClient } from "@xata.io/client";
import { VectorDBQAChain } from "@langchain/classic/chains";
import { Document } from "@langchain/core/documents";

// First, follow set-up instructions at
// https://js.langchain.com/docs/modules/data_connection/vectorstores/integrations/xata

// if you use the generated client, you don't need this function.
// Just import getXataClient from the generated xata.ts instead.
const getXataClient = () => {
  if (!process.env.XATA_API_KEY) {
    throw new Error("XATA_API_KEY not set");
  }

  if (!process.env.XATA_DB_URL) {
    throw new Error("XATA_DB_URL not set");
  }
  const xata = new BaseClient({
    databaseURL: process.env.XATA_DB_URL,
    apiKey: process.env.XATA_API_KEY,
    branch: process.env.XATA_BRANCH || "main",
  });
  return xata;
};

export async function run() {
  const client = getXataClient();

  const table = "vectors";
  const embeddings = new OpenAIEmbeddings();
  const store = new XataVectorSearch(embeddings, { client, table });

  // Add documents
  const docs = [
    new Document({
      pageContent: "Xata is a Serverless Data platform based on PostgreSQL",
    }),
    new Document({
      pageContent:
        "Xata offers a built-in vector type that can be used to store and query vectors",
    }),
    new Document({
      pageContent: "Xata includes similarity search",
    }),
  ];

  const ids = await store.addDocuments(docs);

  // eslint-disable-next-line no-promise-executor-return
  await new Promise((r) => setTimeout(r, 2000));

  const model = new OpenAI();
  const chain = VectorDBQAChain.fromLLM(model, store, {
    k: 1,
    returnSourceDocuments: true,
  });
  const response = await chain.invoke({ query: "What is Xata?" });

  console.log(JSON.stringify(response, null, 2));

  await store.delete({ ids });
}
```

### 예제: metadata 필터를 사용한 유사도 검색

이 예제는 LangChain.js와 Xata를 사용하여 의미론적 검색을 구현하는 방법을 보여줍니다. 실행하기 전에 Xata의 `vectors` 테이블에 String 타입의 `author` 컬럼을 추가해야 합니다.

```typescript
import { XataVectorSearch } from "@langchain/community/vectorstores/xata";
import { OpenAIEmbeddings } from "@langchain/openai";
import { BaseClient } from "@xata.io/client";
import { Document } from "@langchain/core/documents";

// First, follow set-up instructions at
// https://js.langchain.com/docs/modules/data_connection/vectorstores/integrations/xata
// Also, add a column named "author" to the "vectors" table.

// if you use the generated client, you don't need this function.
// Just import getXataClient from the generated xata.ts instead.
const getXataClient = () => {
  if (!process.env.XATA_API_KEY) {
    throw new Error("XATA_API_KEY not set");
  }

  if (!process.env.XATA_DB_URL) {
    throw new Error("XATA_DB_URL not set");
  }
  const xata = new BaseClient({
    databaseURL: process.env.XATA_DB_URL,
    apiKey: process.env.XATA_API_KEY,
    branch: process.env.XATA_BRANCH || "main",
  });
  return xata;
};

export async function run() {
  const client = getXataClient();
  const table = "vectors";
  const embeddings = new OpenAIEmbeddings();
  const store = new XataVectorSearch(embeddings, { client, table });
  // Add documents
  const docs = [
    new Document({
      pageContent: "Xata works great with LangChain.js",
      metadata: { author: "Xata" },
    }),
    new Document({
      pageContent: "Xata works great with LangChain",
      metadata: { author: "LangChain" },
    }),
    new Document({
      pageContent: "Xata includes similarity search",
      metadata: { author: "Xata" },
    }),
  ];
  const ids = await store.addDocuments(docs);

  // eslint-disable-next-line no-promise-executor-return
  await new Promise((r) => setTimeout(r, 2000));

  // author is applied as pre-filter to the similarity search
  const results = await store.similaritySearchWithScore("xata works great", 6, {
    author: "LangChain",
  });

  console.log(JSON.stringify(results, null, 2));

  await store.delete({ ids });
}
```

## Related

- Vector store [개념 가이드](/oss/javascript/integrations/vectorstores)
- Vector store [how-to 가이드](/oss/javascript/integrations/vectorstores)

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/vectorstores/xata.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
