---
title: "Embedding models"
---

## 개요

<Note>
이 개요는 **텍스트 기반 embedding model**을 다룹니다. LangChain은 현재 multimodal embedding을 지원하지 않습니다.
</Note>

Embedding model은 문장, 단락 또는 트윗과 같은 원시 텍스트를 **의미론적 의미**를 포착하는 고정 길이의 숫자 vector로 변환합니다. 이러한 vector를 통해 기계는 정확한 단어가 아닌 의미를 기반으로 텍스트를 비교하고 검색할 수 있습니다.

실제로 이는 유사한 아이디어를 가진 텍스트가 vector 공간에서 서로 가까이 배치된다는 것을 의미합니다. 예를 들어, *"machine learning"*이라는 구문만 일치시키는 대신, embedding은 다른 표현이 사용되더라도 관련 개념을 논의하는 문서를 찾아낼 수 있습니다.

### 작동 방식

1. **Vectorization** — model은 각 입력 문자열을 고차원 vector로 인코딩합니다.
2. **Similarity scoring** — vector는 수학적 메트릭을 사용하여 비교되어 기본 텍스트가 얼마나 밀접하게 관련되어 있는지 측정합니다.

### Similarity 메트릭

Embedding을 비교하는 데 일반적으로 사용되는 여러 메트릭이 있습니다:

* **Cosine similarity** — 두 vector 사이의 각도를 측정합니다.
* **Euclidean distance** — 점 사이의 직선 거리를 측정합니다.
* **Dot product** — 한 vector가 다른 vector에 얼마나 투영되는지 측정합니다.

## Interface

LangChain은 [Embeddings](https://v03.api.js.langchain.com/classes/_langchain_core.embeddings.Embeddings.html) interface를 통해 텍스트 embedding model(예: OpenAI, Cohere, Hugging Face)에 대한 표준 interface를 제공합니다.

두 가지 주요 method를 사용할 수 있습니다:

* `embedDocuments(documents: string[]) → number[][]`: 문서 목록을 embedding합니다.
* `embedQuery(text: string) → number[]`: 단일 query를 embedding합니다.

<Note>
이 interface는 query와 document를 서로 다른 전략으로 embedding할 수 있도록 하지만, 실제로는 대부분의 provider가 동일한 방식으로 처리합니다.
</Note>

## 설치 및 사용

<AccordionGroup>
<Accordion title="OpenAI">

dependency 설치:

<CodeGroup>

```bash npm
npm i @langchain/openai
```
```bash yarn
yarn add @langchain/openai
```
```bash pnpm
pnpm add @langchain/openai
```
</CodeGroup>

환경 변수 추가:

```bash
OPENAI_API_KEY=your-api-key
```

model 인스턴스화:

```typescript
import { OpenAIEmbeddings } from "@langchain/openai";

const embeddings = new OpenAIEmbeddings({
  model: "text-embedding-3-large"
});
```

</Accordion>
<Accordion title="Azure">

dependency 설치

<CodeGroup>

```bash npm
npm i @langchain/openai
```
```bash yarn
yarn add @langchain/openai
```

```bash pnpm
pnpm add @langchain/openai
```
</CodeGroup>

환경 변수 추가:

```bash
AZURE_OPENAI_API_INSTANCE_NAME=<YOUR_INSTANCE_NAME>
AZURE_OPENAI_API_KEY=<YOUR_KEY>
AZURE_OPENAI_API_VERSION="2024-02-01"
```

model 인스턴스화:

```typescript
import { AzureOpenAIEmbeddings } from "@langchain/openai";

const embeddings = new AzureOpenAIEmbeddings({
  azureOpenAIApiEmbeddingsDeploymentName: "text-embedding-ada-002"
});
```

</Accordion>

<Accordion title="AWS">

dependency 설치:

<CodeGroup>

```bash npm
npm i @langchain/aws
```

```bash yarn
yarn add @langchain/aws
```

```bash pnpm
pnpm add @langchain/aws
```

</CodeGroup>

환경 변수 추가:

```bash
BEDROCK_AWS_REGION=your-region
```

model 인스턴스화:

```typescript
import { BedrockEmbeddings } from "@langchain/aws";

const embeddings = new BedrockEmbeddings({
  model: "amazon.titan-embed-text-v1"
});
```

</Accordion>
<Accordion title="Google Gemini">

dependency 설치:

<CodeGroup>
```bash npm
npm i @langchain/google-genai
```

```bash yarn
yarn add @langchain/google-genai
```

```bash pnpm
pnpm add @langchain/google-genai
```
</CodeGroup>

환경 변수 추가:

```bash
GOOGLE_API_KEY=your-api-key
```

model 인스턴스화:

```typescript
import { GoogleGenerativeAIEmbeddings } from "@langchain/google-genai";

const embeddings = new GoogleGenerativeAIEmbeddings({
  model: "text-embedding-004"
});
```

</Accordion>
<Accordion title="Google Vertex">

dependency 설치:

<CodeGroup>

```bash npm
npm i @langchain/google-vertexai
```

```bash yarn
yarn add @langchain/google-vertexai
```

```bash pnpm
pnpm add @langchain/google-vertexai
```
</CodeGroup>

환경 변수 추가:

```bash
GOOGLE_APPLICATION_CREDENTIALS=credentials.json
```

model 인스턴스화:

```typescript
import { VertexAIEmbeddings } from "@langchain/google-vertexai";

const embeddings = new VertexAIEmbeddings({
  model: "gemini-embedding-001"
});
```

</Accordion>
<Accordion title="MistralAI">

dependency 설치:

<CodeGroup>
```bash npm
npm i @langchain/mistralai
```

```bash yarn
yarn add @langchain/mistralai
```

```bash pnpm
pnpm add @langchain/mistralai
```
</CodeGroup>

환경 변수 추가:

```bash
MISTRAL_API_KEY=your-api-key
```

model 인스턴스화:

```typescript
import { MistralAIEmbeddings } from "@langchain/mistralai";

const embeddings = new MistralAIEmbeddings({
  model: "mistral-embed"
});
```

</Accordion>
<Accordion title="Cohere">

dependency 설치:

<CodeGroup>
```bash npm
npm i @langchain/cohere
```

```bash yarn
yarn add @langchain/cohere
```

```bash pnpm
pnpm add @langchain/cohere
```

</CodeGroup>

환경 변수 추가:

```bash
COHERE_API_KEY=your-api-key
```

model 인스턴스화:

```typescript
import { CohereEmbeddings } from "@langchain/cohere";

const embeddings = new CohereEmbeddings({
  model: "embed-english-v3.0"
});
```

</Accordion>
<Accordion title="Ollama">

dependency 설치:

<CodeGroup>
```bash npm
npm i @langchain/ollama
```

```bash yarn
yarn add @langchain/ollama
```

```bash pnpm
pnpm add @langchain/ollama
```
</CodeGroup>

model 인스턴스화:

```typescript
import { OllamaEmbeddings } from "@langchain/ollama";

const embeddings = new OllamaEmbeddings({
  model: "llama2",
  baseUrl: "http://localhost:11434", // Default value
});
```

</Accordion>
</AccordionGroup>

## Caching

Embedding은 재계산할 필요가 없도록 저장하거나 임시로 캐시할 수 있습니다.

Embedding 캐싱은 `CacheBackedEmbeddings`를 사용하여 수행할 수 있습니다. 이 wrapper는 key-value store에 embedding을 저장하며, 텍스트는 해시되고 해시는 cache의 key로 사용됩니다.

`CacheBackedEmbeddings`를 초기화하는 주요 지원 방법은 `fromBytesStore`입니다. 다음 parameter를 사용합니다:

- **underlyingEmbeddings**: embedding에 사용할 embedder.
- **documentEmbeddingStore**: document embedding을 캐싱하기 위한 [`BaseStore`](/oss/javascript/integrations/stores/).
- **options.namespace**: (선택 사항, 기본값 `""`) document cache에 사용할 namespace. 충돌을 방지하는 데 도움이 됩니다(예: embedding model 이름으로 설정).

<Important>
- 다른 embedding model을 사용할 때 충돌을 방지하려면 항상 `namespace` parameter를 설정하세요.
- `CacheBackedEmbeddings`는 기본적으로 query embedding을 캐시하지 않습니다. 이를 활성화하려면 `query_embedding_store`를 지정하세요.
</Important>

```typescript
import { CacheBackedEmbeddings } from "@langchain/classic/embeddings/cache_backed";
import { InMemoryStore } from "@langchain/core/stores";

const underlyingEmbeddings = new OpenAIEmbeddings();

const inMemoryStore = new InMemoryStore();

const cacheBackedEmbeddings = CacheBackedEmbeddings.fromBytesStore(
  underlyingEmbeddings,
  inMemoryStore,
  {
    namespace: underlyingEmbeddings.model,
  }
);

// Example: caching a query embedding
const tic = Date.now();
const queryEmbedding = cacheBackedEmbeddings.embedQuery("Hello, world!");
console.log(`First call took: ${Date.now() - tic}ms`);

// Example: caching a document embedding
const tic = Date.now();
const documentEmbedding = cacheBackedEmbeddings.embedDocuments(["Hello, world!"]);
console.log(`Cached creation time: ${Date.now() - tic}ms`);
```

프로덕션 환경에서는 일반적으로 데이터베이스나 클라우드 스토리지와 같은 더 강력한 영구 저장소를 사용합니다. 옵션은 [stores integrations](/oss/javascript/integrations/stores/)를 참조하세요.

## 모든 integration

<Columns cols={3}>
  <Card
    title="Alibaba Tongyi"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/alibaba_tongyi"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Azure OpenAI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/azure_openai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Baidu Qianfan"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/baidu_qianfan"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Amazon Bedrock"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/bedrock"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="ByteDance Doubao"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/bytedance_doubao"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Cloudflare Workers AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/cloudflare_ai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Cohere"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/cohere"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="DeepInfra"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/deepinfra"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Fireworks"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/fireworks"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Google Generative AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/google_generativeai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Google Vertex AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/google_vertex_ai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Gradient AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/gradient_ai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="HuggingFace Inference"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/hugging_face_inference"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="IBM watsonx.ai"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/ibm"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Jina"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/jina"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Llama CPP"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/llama_cpp"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Minimax"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/minimax"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="MistralAI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/mistralai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Mixedbread AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/mixedbread_ai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Nomic"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/nomic"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Ollama"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/ollama"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="OpenAI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/openai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Pinecone"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/pinecone"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Prem AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/premai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Tencent Hunyuan"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/tencent_hunyuan"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="TensorFlow"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/tensorflow"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="TogetherAI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/togetherai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="HuggingFace Transformers"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/transformers"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="Voyage AI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/voyageai"
    arrow="true"
    cta="가이드 보기"
  />
  <Card
    title="ZhipuAI"
    icon="link"
    href="/oss/javascript/integrations/text_embedding/zhipuai"
    arrow="true"
    cta="가이드 보기"
  />
</Columns>

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/text_embedding/index.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
