---
title: BedrockEmbeddings
---

[Amazon Bedrock](https://aws.amazon.com/bedrock/)은 AI21 Labs, Anthropic, Cohere, Meta, Stability AI, Amazon과 같은 주요 AI 기업의 고성능 foundation model(FM)을 단일 API를 통해 제공하는 완전 관리형 서비스입니다. 보안, 프라이버시 및 책임 있는 AI를 갖춘 생성형 AI 애플리케이션을 구축하는 데 필요한 광범위한 기능을 제공합니다.

이 가이드는 LangChain을 사용하여 Amazon Bedrock [embedding model](/oss/javascript/integrations/text_embedding)을 시작하는 데 도움을 드립니다. `Bedrock`의 기능 및 구성 옵션에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain_aws.BedrockEmbeddings.html)를 참조하세요.

## Overview

### Integration details

| Class | Package | Local | [Py support](https://python.langchain.com/docs/integrations/text_embedding/bedrock/) | Downloads | Version |
| :--- | :--- | :---: | :---: |  :---: | :---: |
| [Bedrock](https://api.js.langchain.com/classes/langchain_aws.BedrockEmbeddings.html) | [@langchain/aws](https://api.js.langchain.com/modules/langchain_aws.html) | ❌ | ✅ | ![NPM - Downloads](https://img.shields.io/npm/dm/@langchain/aws?style=flat-square&label=%20&) | ![NPM - Version](https://img.shields.io/npm/v/@langchain/aws?style=flat-square&label=%20&) |

## Setup

Bedrock embedding model에 액세스하려면 AWS 계정을 생성하고, API key를 받고, `@langchain/aws` integration package를 설치해야 합니다.

AWS에 가입하고 자격 증명을 설정하려면 [AWS docs](https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html)를 참조하세요. 또한 [다음 지침](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access.html)에 따라 계정에 대한 model access를 활성화해야 합니다.

### Credentials

model 호출에 대한 자동 추적을 원하시면 아래 주석을 해제하여 [LangSmith](https://docs.smith.langchain.com/) API key를 설정할 수 있습니다:

```bash
# export LANGSMITH_TRACING="true"
# export LANGSMITH_API_KEY="your-api-key"
```

### Installation

LangChain Bedrock integration은 `@langchain/aws` package에 있습니다:

<CodeGroup>
```bash npm
npm install @langchain/aws @langchain/core
```
```bash yarn
yarn add @langchain/aws @langchain/core
```
```bash pnpm
pnpm add @langchain/aws @langchain/core
```
</CodeGroup>

## Instantiation

이제 model 객체를 인스턴스화하고 텍스트를 embed할 수 있습니다.

AWS 인증에는 몇 가지 방법이 있습니다 - 아래 예제는 환경 변수에 설정된 access key, secret access key 및 region을 사용합니다:

```typescript
import { BedrockEmbeddings } from "@langchain/aws";

const embeddings = new BedrockEmbeddings({
  region: process.env.BEDROCK_AWS_REGION!,
  credentials: {
    accessKeyId: process.env.BEDROCK_AWS_ACCESS_KEY_ID!,
    secretAccessKey: process.env.BEDROCK_AWS_SECRET_ACCESS_KEY!,
  },
  model: "amazon.titan-embed-text-v1",
});
```

## Indexing and Retrieval

Embedding model은 데이터 인덱싱과 나중에 검색하는 과정 모두에서 retrieval-augmented generation(RAG) 플로우에 자주 사용됩니다. 자세한 지침은 [**Learn** 탭](/oss/javascript/learn/)의 RAG 튜토리얼을 참조하세요.

아래에서는 위에서 초기화한 `embeddings` 객체를 사용하여 데이터를 인덱싱하고 검색하는 방법을 확인할 수 있습니다. 이 예제에서는 데모 [`MemoryVectorStore`](/oss/javascript/integrations/vectorstores/memory)를 사용하여 샘플 문서를 인덱싱하고 검색합니다.

```typescript
// Create a vector store with a sample text
import { MemoryVectorStore } from "@langchain/classic/vectorstores/memory";

const text = "LangChain is the framework for building context-aware reasoning applications";

const vectorstore = await MemoryVectorStore.fromDocuments(
  [{ pageContent: text, metadata: {} }],
  embeddings,
);

// Use the vector store as a retriever that returns a single document
const retriever = vectorstore.asRetriever(1);

// Retrieve the most similar text
const retrievedDocuments = await retriever.invoke("What is LangChain?");

retrievedDocuments[0].pageContent;
```

```output
LangChain is the framework for building context-aware reasoning applications
```

## Direct Usage

내부적으로 vectorstore와 retriever 구현은 `embeddings.embedDocument(...)`와 `embeddings.embedQuery(...)`를 호출하여 `fromDocuments`와 retriever의 `invoke` 작업에 사용되는 텍스트에 대한 embedding을 생성합니다.

이러한 메서드를 직접 호출하여 자신의 사용 사례에 맞는 embedding을 얻을 수 있습니다.

### Embed single texts

검색을 위해 `embedQuery`로 쿼리를 embed할 수 있습니다. 이는 쿼리에 특화된 vector 표현을 생성합니다:

```typescript
const singleVector = await embeddings.embedQuery(text);

console.log(singleVector.slice(0, 100));
```

```output
[
         0.625,  0.111328125,      0.265625,   -0.20019531,  0.40820312,
  -0.010803223,  -0.22460938, -0.0002937317,    0.29882812, -0.14355469,
  -0.068847656,   -0.3984375,          0.75,    -0.1953125,  -0.5546875,
  -0.087402344,       0.5625,      1.390625,    -0.3515625,  0.39257812,
  -0.061767578,      0.65625,   -0.36328125,   -0.06591797,    0.234375,
   -0.36132812,   0.42382812,  -0.115234375,   -0.28710938, -0.29296875,
     -0.765625,  -0.16894531,    0.23046875,     0.6328125, -0.08544922,
    0.13671875, 0.0004272461,        0.3125,    0.12207031,   -0.546875,
    0.14257812, -0.119628906,  -0.111328125,    0.61328125,      0.6875,
     0.3671875,   -0.2578125,   -0.27734375,      0.703125,    0.203125,
    0.17675781,  -0.26757812,   -0.76171875,    0.71484375,  0.77734375,
    -0.1953125, -0.007232666,  -0.044921875,    0.23632812, -0.24121094,
  -0.012207031,    0.5078125,    0.08984375,    0.56640625,  -0.3046875,
     0.6484375,        -0.25,   -0.37890625,    -0.2421875,  0.38476562,
   -0.18164062,  -0.05810547,     0.7578125,    0.04296875,    0.609375,
    0.50390625,  0.023803711,   -0.23046875,   0.099121094,  0.79296875,
     -1.296875,     0.671875,   -0.66796875,    0.43359375, 0.087890625,
    0.14550781,  -0.37304688,  -0.068359375, 0.00012874603, -0.47265625,
     -0.765625,   0.07861328,  -0.029663086,   0.076660156, -0.32617188,
     -0.453125,   -0.5546875,   -0.45703125,     1.1015625, -0.29492188
]
```

### Embed multiple texts

`embedDocuments`로 인덱싱을 위해 여러 텍스트를 embed할 수 있습니다. 이 메서드에 사용되는 내부 구현은 쿼리 embedding과 다를 수 있습니다(반드시 그런 것은 아닙니다):

```typescript
const text2 = "LangGraph is a library for building stateful, multi-actor applications with LLMs";

const vectors = await embeddings.embedDocuments([text, text2]);

console.log(vectors[0].slice(0, 100));
console.log(vectors[1].slice(0, 100));
```

```output
[
         0.625,  0.111328125,      0.265625,   -0.20019531,  0.40820312,
  -0.010803223,  -0.22460938, -0.0002937317,    0.29882812, -0.14355469,
  -0.068847656,   -0.3984375,          0.75,    -0.1953125,  -0.5546875,
  -0.087402344,       0.5625,      1.390625,    -0.3515625,  0.39257812,
  -0.061767578,      0.65625,   -0.36328125,   -0.06591797,    0.234375,
   -0.36132812,   0.42382812,  -0.115234375,   -0.28710938, -0.29296875,
     -0.765625,  -0.16894531,    0.23046875,     0.6328125, -0.08544922,
    0.13671875, 0.0004272461,        0.3125,    0.12207031,   -0.546875,
    0.14257812, -0.119628906,  -0.111328125,    0.61328125,      0.6875,
     0.3671875,   -0.2578125,   -0.27734375,      0.703125,    0.203125,
    0.17675781,  -0.26757812,   -0.76171875,    0.71484375,  0.77734375,
    -0.1953125, -0.007232666,  -0.044921875,    0.23632812, -0.24121094,
  -0.012207031,    0.5078125,    0.08984375,    0.56640625,  -0.3046875,
     0.6484375,        -0.25,   -0.37890625,    -0.2421875,  0.38476562,
   -0.18164062,  -0.05810547,     0.7578125,    0.04296875,    0.609375,
    0.50390625,  0.023803711,   -0.23046875,   0.099121094,  0.79296875,
     -1.296875,     0.671875,   -0.66796875,    0.43359375, 0.087890625,
    0.14550781,  -0.37304688,  -0.068359375, 0.00012874603, -0.47265625,
     -0.765625,   0.07861328,  -0.029663086,   0.076660156, -0.32617188,
     -0.453125,   -0.5546875,   -0.45703125,     1.1015625, -0.29492188
]
[
       0.65625,    0.48242188,    0.70703125,   -0.13378906,    0.859375,
     0.2578125,   -0.13378906, -0.0002670288,      -0.34375,  0.25585938,
   -0.33984375,   -0.26367188,      0.828125,   -0.23242188, -0.61328125,
    0.12695312,    0.43359375,     1.3828125,  -0.099121094,   0.3203125,
   -0.34765625,    0.35351562,   -0.28710938,   0.009521484, 0.083496094,
   0.040283203,   -0.25390625,    0.17871094,   0.044189453, -0.19628906,
    0.45898438,    0.21191406,    0.67578125,     0.8359375, -0.29101562,
   0.021118164,    0.13671875,   0.083984375,    0.34570312,  0.30859375,
  -0.001625061,    0.31835938,   -0.18164062, -0.0058288574,  0.22460938,
    0.26757812,   -0.09082031,    0.17480469,     1.4921875, -0.24316406,
    0.36523438,    0.14550781,     -0.609375,    0.33007812,  0.10595703,
     0.3671875,    0.18359375,   -0.62109375,    0.51171875, 0.024047852,
   0.092285156,   -0.44335938,     0.4921875,      0.609375, -0.48242188,
      0.796875,   -0.47851562,      -0.53125,   -0.66796875,  0.68359375,
   -0.16796875,   0.110839844,    0.84765625,      0.703125,   0.8671875,
    0.37695312, -0.0022888184,   -0.30664062,     0.3671875,  0.16503906,
   -0.59765625,     0.3203125,      -0.34375,    0.08251953,    0.890625,
    0.38476562,   -0.24707031,        -0.125, 0.00013160706, -0.69921875,
      -0.53125,   0.052490234,    0.27734375,    0.42773438, -0.38867188,
    -0.2578125,         -0.25,      -0.46875,      0.828125, -0.94140625
]
```

## Configuring the Bedrock Runtime Client

`credentials`, `region`, `retryPolicy` 등의 옵션을 사용자 정의하려면 자체 `BedrockRuntimeClient` 인스턴스를 전달할 수 있습니다.

```typescript
import { BedrockRuntimeClient } from "@aws-sdk/client-bedrock-runtime";
import { BedrockEmbeddings } from "@langchain/aws";

const getCredentials = () => {
  // do something to get credentials
}

// @lc-ts-ignore
const client = new BedrockRuntimeClient({
  region: "us-east-1",
  credentials: getCredentials(),
});

const embeddingsWithCustomClient = new BedrockEmbeddings({
  client,
});
```

## API reference

모든 Bedrock 기능 및 구성에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain_aws.BedrockEmbeddings.html)를 참조하세요.

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/text_embedding/bedrock.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
