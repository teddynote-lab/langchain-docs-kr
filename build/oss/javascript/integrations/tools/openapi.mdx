---
title: OpenApi Toolkit
---


<Warning>
이 agent는 외부 API에 요청을 보낼 수 있습니다. 특히 사용자에게 액세스 권한을 부여할 때 주의해서 사용하세요.

이 agent는 이론적으로 제공된 자격 증명이나 기타 민감한 데이터를 검증되지 않았거나 잠재적으로 악의적인 URL로 요청을 보낼 수 있습니다 -- 비록 이론적으로는 절대 그래서는 안 되지만요.

agent를 통해 수행할 수 있는 작업, 액세스할 수 있는 API, 전달할 수 있는 header 등에 제한을 추가하는 것을 고려하세요.

또한 요청을 보내기 전에 URL을 검증하고, 자격 증명과 같은 민감한 데이터를 안전하게 처리하고 보호하는 조치를 구현하는 것을 고려하세요.

</Warning>


이 문서는 [OpenApiToolkit](/oss/javascript/langchain/tools#toolkits) 시작하기에 도움이 될 것입니다. 모든 OpenApiToolkit 기능 및 구성에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain.agents.OpenApiToolkit.html)를 참조하세요.

`OpenAPIToolkit`은 다음 tool들에 액세스할 수 있습니다:

| Name            | Description |
|-----------------|-------------|
| `requests_get`  | 인터넷으로 가는 포털입니다. 웹사이트에서 특정 콘텐츠를 가져와야 할 때 사용하세요. Input은 url 문자열이어야 합니다 (예: "[www.google.com](https://www.google.com)"). Output은 GET 요청의 텍스트 응답이 됩니다. |
| `requests_post` | 웹사이트에 POST하려고 할 때 사용하세요. Input은 "url"과 "data" 두 개의 key를 가진 json 문자열이어야 합니다. "url"의 값은 문자열이어야 하고, "data"의 값은 JSON body로 url에 POST하려는 key-value 쌍의 dictionary여야 합니다. json 문자열에서 문자열에 항상 큰따옴표를 사용하도록 주의하세요. Output은 POST 요청의 텍스트 응답이 됩니다. |
| `json_explorer` | API의 openapi spec에 대한 질문에 답하는 데 사용할 수 있습니다. 요청을 시도하기 전에 항상 이 tool을 사용하세요. 이 tool에 대한 입력 예시: 'What are the required query parameters for a GET request to the /bar endpoint?' 'What are the required parameters in the request body for a POST request to the /foo endpoint?' 항상 이 tool에 구체적인 질문을 제공하세요. |

## Setup

이 toolkit은 OpenAPI spec 파일이 필요합니다. LangChain.js repository에는 [`examples` 디렉토리에 샘플 OpenAPI spec 파일](https://github.com/langchain-ai/langchainjs/blob/cc21aa29102571204f4443a40b53d28581a12e30/examples/openai_openapi.yaml)이 있습니다. 이 파일을 사용하여 toolkit을 테스트할 수 있습니다.

개별 tool 실행에서 자동화된 tracing을 받으려면 아래 주석을 해제하여 [LangSmith](https://docs.smith.langchain.com/) API key를 설정할 수도 있습니다:

```typescript
process.env.LANGSMITH_TRACING="true"
process.env.LANGSMITH_API_KEY="your-api-key"
```

### Installation

이 toolkit은 `langchain` package에 있습니다:

<CodeGroup>
```bash npm
npm install langchain @langchain/core
```
```bash yarn
yarn add langchain @langchain/core
```
```bash pnpm
pnpm add langchain @langchain/core
```
</CodeGroup>

## Instantiation

이제 toolkit을 인스턴스화할 수 있습니다. 먼저 toolkit에서 사용할 LLM을 정의해야 합니다.

```typescript
// @lc-docs-hide-cell

import { ChatOpenAI } from "@langchain/openai";
const llm = new ChatOpenAI({
  model: "gpt-4o-mini",
  temperature: 0,
})
```

```typescript
import { OpenApiToolkit } from "@langchain/classic/agents/toolkits"
import * as fs from "fs";
import * as yaml from "js-yaml";
import { JsonSpec, JsonObject } from "@langchain/classic/tools";

// Load & convert the OpenAPI spec from YAML to JSON.
const yamlFile = fs.readFileSync("../../../../../examples/openai_openapi.yaml", "utf8");
const data = yaml.load(yamlFile) as JsonObject;
if (!data) {
  throw new Error("Failed to load OpenAPI spec");
}

// Define headers for the API requests.
const headers = {
  "Content-Type": "application/json",
  Authorization: `Bearer ${process.env.OPENAI_API_KEY}`,
};

const toolkit = new OpenApiToolkit(new JsonSpec(data), llm, headers);
```

## Tools

사용 가능한 tool 보기:

```typescript
const tools = toolkit.getTools();

console.log(tools.map((tool) => ({
  name: tool.name,
  description: tool.description,
})))
```

```output
[
  {
    name: 'requests_get',
    description: 'A portal to the internet. Use this when you need to get specific content from a website.\n' +
      '  Input should be a url string (i.e. "https://www.google.com"). The output will be the text response of the GET request.'
  },
  {
    name: 'requests_post',
    description: 'Use this when you want to POST to a website.\n' +
      '  Input should be a json string with two keys: "url" and "data".\n' +
      '  The value of "url" should be a string, and the value of "data" should be a dictionary of\n' +
      '  key-value pairs you want to POST to the url as a JSON body.\n' +
      '  Be careful to always use double quotes for strings in the json string\n' +
      '  The output will be the text response of the POST request.'
  },
  {
    name: 'json_explorer',
    description: '\n' +
      'Can be used to answer questions about the openapi spec for the API. Always use this tool before trying to make a request. \n' +
      'Example inputs to this tool: \n' +
      "    'What are the required query parameters for a GET request to the /bar endpoint?'\n" +
      "    'What are the required parameters in the request body for a POST request to the /foo endpoint?'\n" +
      'Always give this tool a specific question.'
  }
]
```

## Use within an agent

먼저 LangGraph가 설치되어 있는지 확인하세요:


<CodeGroup>
```bash npm
npm install @langchain/langgraph
```
```bash yarn
yarn add @langchain/langgraph
```
```bash pnpm
pnpm add @langchain/langgraph
```
</CodeGroup>


```typescript
import { createAgent } from "@langchain/classic"

const agentExecutor = createAgent({ llm, tools });
```

```typescript
const exampleQuery = "Make a POST request to openai /chat/completions. The prompt should be 'tell me a joke.'. Ensure you use the model 'gpt-4o-mini'."

const events = await agentExecutor.stream(
  { messages: [["user", exampleQuery]]},
  { streamMode: "values", }
)

for await (const event of events) {
  const lastMsg = event.messages[event.messages.length - 1];
  if (lastMsg.tool_calls?.length) {
    console.dir(lastMsg.tool_calls, { depth: null });
  } else if (lastMsg.content) {
    console.log(lastMsg.content);
  }
}
```

```output
[
  {
    name: 'requests_post',
    args: {
      input: '{"url":"https://api.openai.com/v1/chat/completions","data":{"model":"gpt-4o-mini","messages":[{"role":"user","content":"tell me a joke."}]}}'
    },
    type: 'tool_call',
    id: 'call_1HqyZrbYgKFwQRfAtsZA2uL5'
  }
]
{
  "id": "chatcmpl-9t36IIuRCs0WGMEy69HUqPcKvOc1w",
  "object": "chat.completion",
  "created": 1722906986,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Why don't skeletons fight each other? \n\nThey don't have the guts!"
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 12,
    "completion_tokens": 15,
    "total_tokens": 27
  },
  "system_fingerprint": "fp_48196bc67a"
}

Here's a joke for you:

**Why don't skeletons fight each other?**
They don't have the guts!
```

## API reference

모든 OpenApiToolkit 기능 및 구성에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain.agents.OpenApiToolkit.html)를 참조하세요.

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/tools/openapi.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
