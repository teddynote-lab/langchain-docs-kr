---
title: SqlToolkit
---

이 문서는 [SqlToolkit](/oss/javascript/langchain/tools#toolkits) 시작하기를 도와드립니다. 모든 SqlToolkit 기능과 구성에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain.agents_toolkits_sql.SqlToolkit.html)를 참조하세요. Python 버전에 대한 문서는 [여기](https://python.langchain.com/docs/integrations/toolkits/sql_database/)에서 찾을 수 있습니다.

이 toolkit은 다음 도구들을 포함합니다:

| Name              | Description                                                                                                                                                                                                                               |
|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `query-sql`       | 이 도구의 입력은 상세하고 정확한 SQL 쿼리이며, 출력은 데이터베이스의 결과입니다. 쿼리가 올바르지 않으면 오류 메시지가 반환됩니다. 오류가 반환되면 쿼리를 다시 작성하고, 확인한 후 다시 시도하세요. |
| `info-sql`        | 이 도구의 입력은 쉼표로 구분된 테이블 목록이며, 출력은 해당 테이블의 스키마와 샘플 행입니다. 먼저 list-tables-sql을 호출하여 테이블이 실제로 존재하는지 확인하세요! 예시 입력: "table1, table2, table3".          |
| `list-tables-sql` | 입력은 빈 문자열이며, 출력은 데이터베이스의 테이블을 쉼표로 구분한 목록입니다.                                                                                                                                                     |
| `query-checker`   | 쿼리를 실행하기 전에 쿼리가 올바른지 다시 확인하기 위해 이 도구를 사용하세요. query-sql로 쿼리를 실행하기 전에 항상 이 도구를 사용하세요!                                                                                                 |

이 toolkit은 SQL 데이터베이스에 대한 질문, 쿼리 수행, 쿼리 검증 등에 유용합니다.

## Setup

이 예제는 SQL Server, Oracle, MySQL 등에서 사용할 수 있는 샘플 데이터베이스인 Chinook 데이터베이스를 사용합니다. 설정하려면 [이 지침](https://database.guide/2-sample-databases-sqlite/)을 따라 `.db` 파일을 코드가 있는 디렉토리에 배치하세요.

개별 도구 실행에서 자동 추적을 받으려면 아래 주석을 해제하여 [LangSmith](https://docs.smith.langchain.com/) API 키를 설정할 수도 있습니다:

```typescript
process.env.LANGSMITH_TRACING="true"
process.env.LANGSMITH_API_KEY="your-api-key"
```

### Installation

이 toolkit은 `langchain` 패키지에 포함되어 있습니다. `typeorm` peer dependency도 설치해야 합니다.

<CodeGroup>
```bash npm
npm install langchain @langchain/core typeorm
```
```bash yarn
yarn add langchain @langchain/core typeorm
```
```bash pnpm
pnpm add langchain @langchain/core typeorm
```
</CodeGroup>

## Instantiation

먼저, toolkit에서 사용할 LLM을 정의해야 합니다.

```typescript
// @lc-docs-hide-cell

import { ChatOpenAI } from "@langchain/openai";

const llm = new ChatOpenAI({
  model: "gpt-4o-mini",
  temperature: 0,
})
```

```typescript
import { SqlToolkit } from "@langchain/classic/agents/toolkits/sql"
import { DataSource } from "typeorm";
import { SqlDatabase } from "@langchain/classic/sql_db";

const datasource = new DataSource({
  type: "sqlite",
  database: "../../../../../../Chinook.db", // Replace with the link to your database
});
const db = await SqlDatabase.fromDataSourceParams({
  appDataSource: datasource,
});

const toolkit = new SqlToolkit(db, llm);
```

## Tools

사용 가능한 도구 보기:

```typescript
const tools = toolkit.getTools();

console.log(tools.map((tool) => ({
  name: tool.name,
  description: tool.description,
})))
```

```output
[
  {
    name: 'query-sql',
    description: 'Input to this tool is a detailed and correct SQL query, output is a result from the database.\n' +
      '  If the query is not correct, an error message will be returned.\n' +
      '  If an error is returned, rewrite the query, check the query, and try again.'
  },
  {
    name: 'info-sql',
    description: 'Input to this tool is a comma-separated list of tables, output is the schema and sample rows for those tables.\n' +
      '    Be sure that the tables actually exist by calling list-tables-sql first!\n' +
      '\n' +
      '    Example Input: "table1, table2, table3.'
  },
  {
    name: 'list-tables-sql',
    description: 'Input is an empty string, output is a comma-separated list of tables in the database.'
  },
  {
    name: 'query-checker',
    description: 'Use this tool to double check if your query is correct before executing it.\n' +
      '    Always use this tool before executing a query with query-sql!'
  }
]
```

## Use within an agent

먼저, LangGraph가 설치되어 있는지 확인하세요:


<CodeGroup>
```bash npm
npm install @langchain/langgraph
```
```bash yarn
yarn add @langchain/langgraph
```
```bash pnpm
pnpm add @langchain/langgraph
```
</CodeGroup>


```typescript
import { createAgent } from "@langchain/classic"

const agentExecutor = createAgent({ llm, tools });
```

```typescript
const exampleQuery = "Can you list 10 artists from my database?"

const events = await agentExecutor.stream(
  { messages: [["user", exampleQuery]]},
  { streamMode: "values", }
)

for await (const event of events) {
  const lastMsg = event.messages[event.messages.length - 1];
  if (lastMsg.tool_calls?.length) {
    console.dir(lastMsg.tool_calls, { depth: null });
  } else if (lastMsg.content) {
    console.log(lastMsg.content);
  }
}
```

```output
[
  {
    name: 'list-tables-sql',
    args: {},
    type: 'tool_call',
    id: 'call_LqsRA86SsKmzhRfSRekIQtff'
  }
]
Album, Artist, Customer, Employee, Genre, Invoice, InvoiceLine, MediaType, Playlist, PlaylistTrack, Track
[
  {
    name: 'query-checker',
    args: { input: 'SELECT * FROM Artist LIMIT 10;' },
    type: 'tool_call',
    id: 'call_MKBCjt4gKhl5UpnjsMHmDrBH'
  }
]
The SQL query you provided is:

\`\`\`sql
SELECT * FROM Artist LIMIT 10;
\`\`\`

This query is straightforward and does not contain any of the common mistakes listed. It simply selects all columns from the `Artist` table and limits the result to 10 rows.

Therefore, there are no mistakes to correct, and the original query can be reproduced as is:

\`\`\`sql
SELECT * FROM Artist LIMIT 10;
\`\`\`
[
  {
    name: 'query-sql',
    args: { input: 'SELECT * FROM Artist LIMIT 10;' },
    type: 'tool_call',
    id: 'call_a8MPiqXPMaN6yjN9i7rJctJo'
  }
]
[{"ArtistId":1,"Name":"AC/DC"},{"ArtistId":2,"Name":"Accept"},{"ArtistId":3,"Name":"Aerosmith"},{"ArtistId":4,"Name":"Alanis Morissette"},{"ArtistId":5,"Name":"Alice In Chains"},{"ArtistId":6,"Name":"Antônio Carlos Jobim"},{"ArtistId":7,"Name":"Apocalyptica"},{"ArtistId":8,"Name":"Audioslave"},{"ArtistId":9,"Name":"BackBeat"},{"ArtistId":10,"Name":"Billy Cobham"}]
Here are 10 artists from your database:

1. AC/DC
2. Accept
3. Aerosmith
4. Alanis Morissette
5. Alice In Chains
6. Antônio Carlos Jobim
7. Apocalyptica
8. Audioslave
9. BackBeat
10. Billy Cobham
```

## API reference

모든 SqlToolkit 기능과 구성에 대한 자세한 문서는 [API reference](https://api.js.langchain.com/classes/langchain.agents_toolkits_sql.SqlToolkit.html)를 참조하세요.

---

<Callout icon="pen-to-square" iconType="regular">
    [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/tools/sql.mdx)
</Callout>
<Tip icon="terminal" iconType="regular">
    [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for    real-time answers.
</Tip>
