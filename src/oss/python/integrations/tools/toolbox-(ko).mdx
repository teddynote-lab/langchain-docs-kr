---
title: ë°ì´í„°ë² ì´ìŠ¤ìš© MCP Toolbox
---

MCP Toolboxë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ LangChain agentì™€ í†µí•©í•˜ì„¸ìš”.

## Overview

[MCP Toolbox for Databases](https://github.com/googleapis/genai-toolbox)ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìœ„í•œ ì˜¤í”ˆ ì†ŒìŠ¤ MCP serverì…ë‹ˆë‹¤. ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ë° í”„ë¡œë•ì…˜ í’ˆì§ˆì„ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. connection pooling, authentication ë“±ì˜ ë³µì¡í•œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ì—¬ ë” ì‰½ê³ , ë¹ ë¥´ê³ , ì•ˆì „í•˜ê²Œ toolì„ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Toolbox ToolsëŠ” LangChain applicationê³¼ ì›í™œí•˜ê²Œ í†µí•©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. MCP Toolbox [ì‹œì‘í•˜ê¸°](https://googleapis.github.io/genai-toolbox/getting-started/local_quickstart/) ë˜ëŠ” [êµ¬ì„±](https://googleapis.github.io/genai-toolbox/getting-started/configure/)ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](https://googleapis.github.io/genai-toolbox/getting-started/introduction/)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

![architecture](https://raw.githubusercontent.com/googleapis/genai-toolbox/refs/heads/main/docs/en/getting-started/introduction/architecture.png)

## Setup

ì´ ê°€ì´ë“œëŠ” ì´ë¯¸ ë‹¤ìŒ ì‘ì—…ì„ ì™„ë£Œí–ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤:

1. [Python 3.9+](https://wiki.python.org/moin/BeginnersGuide/Download) ë° [pip](https://pip.pypa.io/en/stable/installation/) ì„¤ì¹˜
2. [PostgreSQL 16+ ë° `psql` command-line client](https://www.postgresql.org/download/) ì„¤ì¹˜

### 1. Setup your Database

ë¨¼ì € PostgreSQL databaseë¥¼ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤. ìƒˆ database, MCP Toolbox ì „ìš© user, ê·¸ë¦¬ê³  ìƒ˜í”Œ ë°ì´í„°ê°€ í¬í•¨ëœ `hotels` tableì„ ìƒì„±í•©ë‹ˆë‹¤.

`psql` ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ PostgreSQLì— ì—°ê²°í•©ë‹ˆë‹¤. PostgreSQL ì„¤ì •ì— ë”°ë¼ ëª…ë ¹ì„ ì¡°ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì˜ˆ: hostë¥¼ ì§€ì •í•˜ê±°ë‚˜ ë‹¤ë¥¸ superuserë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°).

```bash
psql -U postgres
```

ì´ì œ ë‹¤ìŒ SQL ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ user, databaseë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤:

```sql
CREATE USER toolbox_user WITH PASSWORD 'my-password';
CREATE DATABASE toolbox_db;
GRANT ALL PRIVILEGES ON DATABASE toolbox_db TO toolbox_user;
ALTER DATABASE toolbox_db OWNER TO toolbox_user;
```

ìƒˆë¡œ ìƒì„±í•œ userë¡œ databaseì— ì—°ê²°í•©ë‹ˆë‹¤:

```sql
\c toolbox_db toolbox_user
```

ë§ˆì§€ë§‰ìœ¼ë¡œ `hotels` tableì„ ìƒì„±í•˜ê³  ë°ì´í„°ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤:

```sql
CREATE TABLE hotels(
  id            INTEGER NOT NULL PRIMARY KEY,
  name          VARCHAR NOT NULL,
  location      VARCHAR NOT NULL,
  price_tier    VARCHAR NOT NULL,
  booked        BIT     NOT NULL
);

INSERT INTO hotels(id, name, location, price_tier, booked)
VALUES
  (1, 'Hilton Basel', 'Basel', 'Luxury', B'0'),
  (2, 'Marriott Zurich', 'Zurich', 'Upscale', B'0'),
  (3, 'Hyatt Regency Basel', 'Basel', 'Upper Upscale', B'0');
```

`\q`ë¥¼ ì…ë ¥í•˜ì—¬ `psql`ì„ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2. Install MCP Toolbox

ë‹¤ìŒìœ¼ë¡œ MCP Toolboxë¥¼ ì„¤ì¹˜í•˜ê³ , `tools.yaml` êµ¬ì„± íŒŒì¼ì— toolì„ ì •ì˜í•œ ë‹¤ìŒ, MCP Toolbox serverë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

**macOS** ì‚¬ìš©ìì˜ ê²½ìš° [Homebrew](https://formulae.brew.sh/formula/mcp-toolbox)ë¡œ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì‰½ìŠµë‹ˆë‹¤:

```bash
brew install mcp-toolbox
```

ë‹¤ë¥¸ í”Œë«í¼ì˜ ê²½ìš° [ìš´ì˜ ì²´ì œ ë° ì•„í‚¤í…ì²˜ì— ë§ëŠ” ìµœì‹  MCP Toolbox binaryë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.](https://github.com/googleapis/genai-toolbox/releases)

`tools.yaml` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ íŒŒì¼ì€ MCP Toolboxê°€ ì—°ê²°í•  ìˆ˜ ìˆëŠ” data sourceì™€ agentì— ë…¸ì¶œí•  ìˆ˜ ìˆëŠ” toolì„ ì •ì˜í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í•­ìƒ secretì— environment variableì„ ì‚¬ìš©í•˜ì„¸ìš”.

```yaml
sources:
  my-pg-source:
    kind: postgres
    host: 127.0.0.1
    port: 5432
    database: toolbox_db
    user: toolbox_user
    password: my-password

tools:
  search-hotels-by-location:
    kind: postgres-sql
    source: my-pg-source
    description: Search for hotels based on location.
    parameters:
      - name: location
        type: string
        description: The location of the hotel.
    statement: SELECT id, name, location, price_tier FROM hotels WHERE location ILIKE '%' || $1 || '%';
  book-hotel:
    kind: postgres-sql
    source: my-pg-source
    description: >-
        Book a hotel by its ID. If the hotel is successfully booked, returns a confirmation message.
    parameters:
      - name: hotel_id
        type: integer
        description: The ID of the hotel to book.
    statement: UPDATE hotels SET booked = B'1' WHERE id = $1;

toolsets:
  hotel_toolset:
    - search-hotels-by-location
    - book-hotel
```

ì´ì œ ë³„ë„ì˜ terminal ì°½ì—ì„œ MCP Toolbox serverë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. Homebrewë¥¼ í†µí•´ ì„¤ì¹˜í•œ ê²½ìš° `toolbox`ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. binaryë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•œ ê²½ìš° ì €ì¥í•œ ë””ë ‰í† ë¦¬ì—ì„œ `./toolbox`ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤:

```bash
toolbox --tools-file "tools.yaml"
```

MCP ToolboxëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `http://127.0.0.1:5000`ì—ì„œ ì‹œì‘ë˜ë©° `tools.yaml` íŒŒì¼ì„ ë³€ê²½í•˜ë©´ hot-reloadë©ë‹ˆë‹¤.

## Instantiation

```python
!pip install toolbox-langchain
```

```python
from toolbox_langchain import ToolboxClient

with ToolboxClient("http://127.0.0.1:5000") as client:
    search_tool = await client.aload_tool("search-hotels-by-location")
```

## Invocation

```python
from toolbox_langchain import ToolboxClient

with ToolboxClient("http://127.0.0.1:5000") as client:
    search_tool = await client.aload_tool("search-hotels-by-location")
    results = search_tool.invoke({"location": "Basel"})
    print(results)
```

```output
[{"id":1,"location":"Basel","name":"Hilton Basel","price_tier":"Luxury"},{"id":3,"location":"Basel","name":"Hyatt Regency Basel","price_tier":"Upper Upscale"}]
```

## Use within an agent

ì´ì œ ì¬ë¯¸ìˆëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤! í•„ìš”í•œ LangChain packageë¥¼ ì„¤ì¹˜í•˜ê³  MCP Toolboxì—ì„œ ì •ì˜í•œ toolì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” agentë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```python
pip install -qU toolbox-langchain langgraph langchain-google-vertexai
```

packageê°€ ì„¤ì¹˜ë˜ë©´ agentë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. modelë¡œëŠ” `ChatVertexAI`ë¥¼ ì‚¬ìš©í•˜ê³  toolì„ ë¡œë“œí•˜ê¸° ìœ„í•´ `ToolboxClient`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. `langchain.agents`ì˜ @[`create_agent`]ëŠ” ì–´ë–¤ toolì„ í˜¸ì¶œí• ì§€ ì¶”ë¡ í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ agentë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ì°¸ê³ :** ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ë³„ë„ì˜ terminalì—ì„œ MCP Toolbox serverê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.

```python
from langchain.agents import create_agent
from langchain_google_vertexai import ChatVertexAI
from langgraph.checkpoint.memory import MemorySaver
from toolbox_langchain import ToolboxClient


prompt = """
You're a helpful hotel assistant. You handle hotel searching and booking.
When the user searches for a hotel, list the full details for each hotel found: id, name, location, and price tier.
Always use the hotel ID for booking operations.
For any bookings, provide a clear confirmation message.
Don't ask for clarification or confirmation from the user; perform the requested action directly.
"""


async def run_queries(agent_executor):
    config = {"configurable": {"thread_id": "hotel-thread-1"}}

    # --- Query 1: Search for hotels ---
    query1 = "I need to find a hotel in Basel."
    print(f'\n--- USER: "{query1}" ---')
    inputs1 = {"messages": [("user", prompt + query1)]}
    async for event in agent_executor.astream_events(
        inputs1, config=config, version="v2"
    ):
        if event["event"] == "on_chat_model_end" and event["data"]["output"].content:
            print(f"--- AGENT: ---\n{event['data']['output'].content}")

    # --- Query 2: Book a hotel ---
    query2 = "Great, please book the Hyatt Regency Basel for me."
    print(f'\n--- USER: "{query2}" ---')
    inputs2 = {"messages": [("user", query2)]}
    async for event in agent_executor.astream_events(
        inputs2, config=config, version="v2"
    ):
        if event["event"] == "on_chat_model_end" and event["data"]["output"].content:
            print(f"--- AGENT: ---\n{event['data']['output'].content}")
```

## Run the agent

```python
async def main():
    await run_hotel_agent()


async def run_hotel_agent():
    model = ChatVertexAI(model_name="gemini-2.5-flash")

    # Load the tools from the running MCP Toolbox server
    async with ToolboxClient("http://127.0.0.1:5000") as client:
        tools = await client.aload_toolset("hotel_toolset")

        agent = create_agent(model, tools, checkpointer=MemorySaver())

        await run_queries(agent)


await main()
```

MCP Toolboxë¥¼ ì‚¬ìš©í•˜ì—¬ LangChain agentë¥¼ ë¡œì»¬ databaseì— ì„±ê³µì ìœ¼ë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤! ğŸ¥³

## API reference

ì´ í†µí•©ì˜ ì£¼ìš” classëŠ” `ToolboxClient`ì…ë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

- [Toolbox ê³µì‹ ë¬¸ì„œ](https://googleapis.github.io/genai-toolbox/)
- [Toolbox GitHub Repository](https://github.com/googleapis/genai-toolbox)
- [Toolbox LangChain SDK](https://github.com/googleapis/mcp-toolbox-python-sdk/tree/main/packages/toolbox-langchain)

MCP ToolboxëŠ” ë°ì´í„°ë² ì´ìŠ¤ìš© Gen AI tool ê°œë°œì„ ì›í™œí•˜ê²Œ ë§Œë“œëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

- [Authenticated Parameters](https://googleapis.github.io/genai-toolbox/resources/tools/#authenticated-parameters): tool inputì„ OIDC tokenì˜ ê°’ì— ìë™ìœ¼ë¡œ ë°”ì¸ë”©í•˜ì—¬ ë°ì´í„° ìœ ì¶œ ê°€ëŠ¥ì„± ì—†ì´ ë¯¼ê°í•œ queryë¥¼ ì‰½ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [Authorized Invocations](https://googleapis.github.io/genai-toolbox/resources/tools/#authorized-invocations): ì‚¬ìš©ìì˜ Auth tokenì„ ê¸°ë°˜ìœ¼ë¡œ tool ì‚¬ìš© ì•¡ì„¸ìŠ¤ë¥¼ ì œí•œí•©ë‹ˆë‹¤
- [OpenTelemetry](https://googleapis.github.io/genai-toolbox/how-to/export_telemetry/): [OpenTelemetry](https://opentelemetry.io/docs/)ë¥¼ í†µí•´ MCP Toolboxì—ì„œ metric ë° tracingì„ ê°€ì ¸ì˜µë‹ˆë‹¤

# Community and Support

ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•˜ì‹œê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤:

- â­ï¸ [GitHub repository](https://github.com/googleapis/genai-toolbox)ë¡œ ì´ë™í•˜ì—¬ ì‹œì‘í•˜ê³  ì—…ë°ì´íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- ğŸ“š ë” ê³ ê¸‰ ê¸°ëŠ¥ ë° êµ¬ì„±ì— ëŒ€í•´ì„œëŠ” [ê³µì‹ ë¬¸ì„œ](https://googleapis.github.io/genai-toolbox/getting-started/introduction/)ë¥¼ ì‚´í´ë³´ì„¸ìš”.
- ğŸ’¬ [Discord server](https://discord.com/invite/a4XjGqtmnG)ì— ì°¸ì—¬í•˜ì—¬ ì»¤ë®¤ë‹ˆí‹°ì™€ ì†Œí†µí•˜ê³  ì§ˆë¬¸í•˜ì„¸ìš”.