```markdown
---
title: UpstageEmbeddings
---

이 노트북은 Upstage embedding model을 시작하는 방법을 다룹니다.

## Installation

`langchain-upstage` package를 설치합니다.

```bash
pip install -U langchain-upstage
```

## Environment Setup

다음 environment variable을 설정해야 합니다:

- `UPSTAGE_API_KEY`: [Upstage console](https://console.upstage.ai/)에서 발급받은 Upstage API key

```python
import os

os.environ["UPSTAGE_API_KEY"] = "YOUR_API_KEY"
```

## Usage

`UpstageEmbeddings` class를 초기화합니다.

```python
from langchain_upstage import UpstageEmbeddings

embeddings = UpstageEmbeddings(model="solar-embedding-1-large")
```

`embed_documents`를 사용하여 text 또는 document list를 embedding합니다.

```python
doc_result = embeddings.embed_documents(
    ["Sung is a professor.", "This is another document"]
)
print(doc_result)
```

`embed_query`를 사용하여 query string을 embedding합니다.

```python
query_result = embeddings.embed_query("What does Sung do?")
print(query_result)
```

비동기 작업을 위해 `aembed_documents`와 `aembed_query`를 사용합니다.

```python
# async embed query
await embeddings.aembed_query("My query to look up")
```

```python
# async embed documents
await embeddings.aembed_documents(
    ["This is a content of the document", "This is another document"]
)
```

## Using with vector store

`UpstageEmbeddings`를 vector store component와 함께 사용할 수 있습니다. 다음은 간단한 예제입니다.

```python
from langchain_community.vectorstores import DocArrayInMemorySearch

vectorstore = DocArrayInMemorySearch.from_texts(
    ["harrison worked at kensho", "bears like to eat honey"],
    embedding=UpstageEmbeddings(model="solar-embedding-1-large"),
)
retriever = vectorstore.as_retriever()
docs = retriever.invoke("Where did Harrison work?")
print(docs)
```
```