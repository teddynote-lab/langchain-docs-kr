---
title: Couchbase
---

[Couchbase](http://couchbase.com/)는 수상 경력이 있는 분산 NoSQL 클라우드 데이터베이스로, 모든 클라우드, 모바일, AI 및 엣지 컴퓨팅 애플리케이션에 비할 데 없는 다양성, 성능, 확장성 및 경제적 가치를 제공합니다.

이 가이드는 Couchbase 데이터베이스에서 문서를 로드하는 방법을 보여줍니다.

# 설치

```bash npm
npm install @langchain/community @langchain/core couchbase
```
## 사용법

### Couchbase에서 문서 쿼리하기

Couchbase 클러스터 연결에 대한 자세한 내용은 [Node.js SDK 문서](https://docs.couchbase.com/nodejs-sdk/current/howtos/managing-connections.html#connection-strings)를 확인하세요.

SQL++ (SQL for JSON)를 사용한 문서 쿼리에 대한 도움말은 [문서](https://docs.couchbase.com/server/current/n1ql/n1ql-language-reference/index.html)를 확인하세요.

```typescript
import { CouchbaseDocumentLoader } from "@langchain/community/document_loaders/web/couchbase";
import { Cluster } from "couchbase";

const connectionString = "couchbase://localhost"; // valid couchbase connection string
const dbUsername = "Administrator"; // valid database user with read access to the bucket being queried
const dbPassword = "Password"; // password for the database user

// query is a valid SQL++ query
const query = `
    SELECT h.* FROM \`travel-sample\`.inventory.hotel h
    WHERE h.country = 'United States'
    LIMIT 1
`;
```
### Couchbase Cluster에 연결하기

```typescript
const couchbaseClient = await Cluster.connect(connectionString, {
  username: dbUsername,
  password: dbPassword,
  configProfile: "wanDevelopment",
});
```
### Loader 생성하기

```typescript
const loader = new CouchbaseDocumentLoader(
  couchbaseClient, // The connected couchbase cluster client
  query // A valid SQL++ query which will return the required data
);
```
### 문서 로드하기

loader의 `load` method를 호출하여 문서를 가져올 수 있습니다. 모든 문서가 포함된 리스트를 반환합니다. 이러한 블로킹 호출을 피하려면 Iterator를 반환하는 `lazy_load` method를 호출할 수 있습니다.

```typescript
// using load method
docs = await loader.load();
console.log(docs);
```
```typescript
// using lazy_load
for await (const doc of this.lazyLoad()) {
  console.log(doc);
  break; // break based on required condition
}
```

### Content와 Metadata를 포함한 필드 지정하기

Document content의 일부인 필드는 `pageContentFields` parameter를 사용하여 지정할 수 있습니다.
Document의 metadata 필드는 `metadataFields` parameter를 사용하여 지정할 수 있습니다.

```typescript
const loaderWithSelectedFields = new CouchbaseDocumentLoader(
  couchbaseClient,
  query,
  // pageContentFields
  [
    "address",
    "name",
    "city",
    "phone",
    "country",
    "geo",
    "description",
    "reviews",
  ],
  ["id"] // metadataFields
);

const filtered_docs = await loaderWithSelectedFields.load();
console.log(filtered_docs);
```