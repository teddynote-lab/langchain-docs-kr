---
title: Azure Container Apps Dynamic Sessions
---

> [Azure Container Apps dynamic sessions](https://learn.microsoft.com/azure/container-apps/sessions)는 다른 워크로드와의 강력한 격리가 필요한 코드나 애플리케이션을 실행하는 데 이상적인 안전한 샌드박스 환경에 대한 빠른 액세스를 제공합니다.

Azure Container Apps dynamic sessions와 코드 해석 기능에 대한 자세한 내용은 [이 페이지](https://learn.microsoft.com/azure/container-apps/sessions)에서 확인할 수 있습니다. Azure 계정이 없다면 [무료 계정을 생성](https://azure.microsoft.com/free/)하여 시작할 수 있습니다.

## Setup

먼저 [`@langchain/azure-dynamic-sessions`](https://www.npmjs.com/package/@langchain/azure-dynamic-sessions) 패키지를 설치해야 합니다:

<Tip>
LangChain 패키지 설치에 대한 일반적인 지침은 [이 섹션](/oss/langchain/install)을 참조하세요.
</Tip>

```bash npm
npm install @langchain/azure-dynamic-sessions @langchain/core
```

또한 실행 중인 code interpreter session pool 인스턴스가 필요합니다. [이 가이드](https://learn.microsoft.com/azure/container-apps/sessions-code-interpreter)를 따라 [Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)를 사용하여 버전을 배포할 수 있습니다.

인스턴스가 실행되면 Azure Entra 인증이 올바르게 설정되어 있는지 확인해야 합니다. 이를 수행하는 방법에 대한 지침은 [여기](https://learn.microsoft.com/azure/container-apps/sessions?tabs=azure-cli#authentication)에서 찾을 수 있습니다.

ID에 대한 역할을 추가한 후 **session pool management endpoint**를 검색해야 합니다. Azure Portal의 인스턴스 "Overview" 섹션에서 찾을 수 있습니다. 그런 다음 다음 환경 변수를 설정해야 합니다:

```bash .env example
AZURE_CONTAINER_APP_SESSION_POOL_MANAGEMENT_ENDPOINT=<your_endpoint>
```

## Usage example

다음은 새로운 Python code interpreter session을 생성하고, tool을 호출하고, 결과를 출력하는 간단한 예제입니다.

```typescript
import { SessionsPythonREPLTool } from "@langchain/azure-dynamic-sessions";

const tool = new SessionsPythonREPLTool({
  poolManagementEndpoint:
    process.env.AZURE_CONTAINER_APP_SESSION_POOL_MANAGEMENT_ENDPOINT || "",
});

const result = await tool.invoke("print('Hello, World!')\n1+2");

console.log(result);

// {
//   stdout: "Hello, World!\n",
//   stderr: "",
//   result: 3,
// }
```

다음은 Azure OpenAI chat model을 사용하여 Python code interpreter session tool을 호출하여 코드를 실행하고 결과를 얻는 완전한 예제입니다:

```typescript
import type { ChatPromptTemplate } from "@langchain/core/prompts";
import { pull } from "@langchain/classic/hub";
import { AgentExecutor, createToolCallingAgent } from "@langchain/classic/agents";
import { SessionsPythonREPLTool } from "@langchain/azure-dynamic-sessions";
import { AzureChatOpenAI } from "@langchain/openai";

const tools = [
  new SessionsPythonREPLTool({
    poolManagementEndpoint:
      process.env.AZURE_CONTAINER_APP_SESSION_POOL_MANAGEMENT_ENDPOINT || "",
  }),
];

// Note: you need a model deployment that supports function calling,
// like `gpt-35-turbo` version `1106`.
const llm = new AzureChatOpenAI({
  temperature: 0,
});

// Get the prompt to use - you can modify this!
// If you want to see the prompt in full, you can at:
// https://smith.langchain.com/hub/jacob/tool-calling-agent
const prompt = await pull<ChatPromptTemplate>("jacob/tool-calling-agent");

const agent = await createToolCallingAgent({
  llm,
  tools,
  prompt,
});

const agentExecutor = new AgentExecutor({
  agent,
  tools,
});

const result = await agentExecutor.invoke({
  input:
    "Create a Python program that prints the Python version and return the result.",
});

console.log(result);
```

## Related

- Tool [개념 가이드](/oss/langchain/tools)
- Tool [사용 방법 가이드](/oss/langchain/tools)
```