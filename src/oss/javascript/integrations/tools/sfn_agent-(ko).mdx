---
title: AWS Step Functions Toolkit
---

**AWS Step Functions**는 개발자가 AWS 서비스를 사용하여 분산 애플리케이션을 구축하고, 프로세스를 자동화하며, 마이크로서비스를 오케스트레이션하고, 데이터 및 머신 러닝(ML) 파이프라인을 생성할 수 있도록 돕는 시각적 워크플로우 서비스입니다.

Agent에 제공되는 tool 목록에 `AWSSfn` tool을 포함하면, Agent가 AWS Cloud에서 실행되는 비동기 워크플로우를 호출할 수 있는 기능을 부여할 수 있습니다.

Agent가 `AWSSfn` tool을 사용할 때, `string` 타입의 argument를 제공하며, 이는 이 tool이 지원하는 action 중 하나로 전달됩니다. 지원되는 action은 `StartExecution`, `DescribeExecution`, `SendTaskSuccess`입니다.

## Setup

Node AWS Step Functions SDK를 설치해야 합니다:

```bash npm
npm install @aws-sdk/client-sfn
```
## Usage

<Tip>
LangChain 패키지 설치에 대한 일반적인 지침은 [이 섹션](/oss/langchain/install)을 참조하세요.
</Tip>

```bash npm
npm install @langchain/openai @langchain/community @langchain/core
```

### 자격 증명에 대한 참고사항:

- AWS CLI를 통해 [`aws configure`](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html)를 실행하지 않은 경우, `region`, `accessKeyId`, `secretAccessKey`를 AWSSfn constructor에 제공해야 합니다.
- 해당 자격 증명에 해당하는 IAM role은 Step Function을 호출할 수 있는 권한이 있어야 합니다.

```typescript
import { OpenAI } from "@langchain/openai";
import {
  AWSSfnToolkit,
  createAWSSfnAgent,
} from "@langchain/community/agents/toolkits/aws_sfn";

const _EXAMPLE_STATE_MACHINE_ASL = `
{
  "Comment": "A simple example of the Amazon States Language to define a state machine for new client onboarding.",
  "StartAt": "OnboardNewClient",
  "States": {
    "OnboardNewClient": {
      "Type": "Pass",
      "Result": "Client onboarded!",
      "End": true
    }
  }
}`;

/**
 * This example uses a deployed AWS Step Function state machine with the above Amazon State Language (ASL) definition.
 * You can test by provisioning a state machine using the above ASL within your AWS environment, or you can use a tool like LocalStack
 * to mock AWS services locally. See https://localstack.cloud/ for more information.
 */
export const run = async () => {
  const model = new OpenAI({ temperature: 0 });
  const toolkit = new AWSSfnToolkit({
    name: "onboard-new-client-workflow",
    description:
      "Onboard new client workflow. Can also be used to get status of any excuting workflow or state machine.",
    stateMachineArn:
      "arn:aws:states:us-east-1:1234567890:stateMachine:my-state-machine", // Update with your state machine ARN accordingly
    region: "<your Sfn's region>",
    accessKeyId: "<your access key id>",
    secretAccessKey: "<your secret access key>",
  });
  const executor = createAWSSfnAgent(model, toolkit);

  const input = `Onboard john doe (john@example.com) as a new client.`;

  console.log(`Executing with input "${input}"...`);

  const result = await executor.invoke({ input });

  console.log(`Got output ${result.output}`);

  console.log(
    `Got intermediate steps ${JSON.stringify(
      result.intermediateSteps,
      null,
      2
    )}`
  );
};
```