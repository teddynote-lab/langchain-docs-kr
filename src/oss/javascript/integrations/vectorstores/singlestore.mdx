---
title: SingleStore
---

[SingleStoreDB](https://singlestore.com/)는 [클라우드](https://www.singlestore.com/cloud/) 및 온프레미스 환경 모두에서 뛰어난 성능을 발휘하도록 설계된 강력하고 고성능의 분산 SQL 데이터베이스 솔루션입니다. 다양한 기능을 자랑하며, 원활한 배포 옵션을 제공하면서 비교할 수 없는 성능을 제공합니다.

SingleStoreDB의 두드러진 특징은 vector 저장 및 연산에 대한 고급 지원으로, 텍스트 유사도 매칭과 같은 복잡한 AI 기능이 필요한 애플리케이션에 이상적인 선택입니다. [dot_product](https://docs.singlestore.com/managed-service/en/reference/sql-reference/vector-functions/dot_product.html) 및 [euclidean_distance](https://docs.singlestore.com/managed-service/en/reference/sql-reference/vector-functions/euclidean_distance.html)와 같은 내장 vector 함수를 통해 SingleStoreDB는 개발자가 정교한 알고리즘을 효율적으로 구현할 수 있도록 지원합니다.

SingleStoreDB 내에서 vector 데이터를 활용하고자 하는 개발자를 위해 [vector 데이터 작업](https://docs.singlestore.com/managed-service/en/developer-resources/functional-extensions/working-with-vector-data.html)의 복잡한 내용을 안내하는 포괄적인 튜토리얼이 제공됩니다. 이 튜토리얼은 SingleStoreDB 내의 Vector Store를 다루며, vector 유사도를 기반으로 한 검색을 용이하게 하는 기능을 보여줍니다. vector index를 활용하여 쿼리를 놀라운 속도로 실행할 수 있어 관련 데이터를 신속하게 검색할 수 있습니다.

또한 SingleStoreDB의 Vector Store는 [Lucene 기반 전문 인덱싱](https://docs.singlestore.com/cloud/developer-resources/functional-extensions/working-with-full-text-search/)과 원활하게 통합되어 강력한 텍스트 유사도 검색을 가능하게 합니다. 사용자는 문서 메타데이터 객체의 선택된 필드를 기반으로 검색 결과를 필터링하여 쿼리 정밀도를 향상시킬 수 있습니다.

SingleStoreDB를 차별화하는 것은 vector 및 전문 검색을 다양한 방식으로 결합할 수 있는 능력으로, 유연성과 다양성을 제공합니다. 텍스트 또는 vector 유사도로 사전 필터링하고 가장 관련성 높은 데이터를 선택하거나, 가중 합계 접근 방식을 사용하여 최종 유사도 점수를 계산하는 등 개발자는 여러 옵션을 사용할 수 있습니다.

본질적으로 SingleStoreDB는 vector 데이터를 관리하고 쿼리하기 위한 포괄적인 솔루션을 제공하며, AI 기반 애플리케이션을 위한 비교할 수 없는 성능과 유연성을 제공합니다.

<Tip>
**호환성**

Node.js에서만 사용 가능합니다.
</Tip>

LangChain.js는 SingleStoreDB 인스턴스에 대한 연결을 생성하기 위해 `mysql2` 라이브러리가 필요합니다.

## Setup

1. SingleStoreDB 환경을 구축하세요. [클라우드 기반](https://docs.singlestore.com/managed-service/en/getting-started-with-singlestoredb-cloud.html) 또는 [온프레미스](https://docs.singlestore.com/db/v8.1/en/developer-resources/get-started-using-singlestoredb-for-free.html) 에디션 중에서 선택할 수 있습니다.
2. mysql2 JS client를 설치하세요

```bash npm
npm install -S mysql2
```
## Usage

`SingleStoreVectorStore`는 connection pool을 관리합니다. 모든 연결이 적절하게 닫히고 가능한 리소스 누수를 방지하기 위해 애플리케이션을 종료하기 전에 `await store.end();`를 호출하는 것이 권장됩니다.

### 표준 사용법

<Tip>
[LangChain 패키지 설치에 대한 일반적인 지침은 이 섹션을 참조하세요](/oss/langchain/install).
</Tip>

```bash npm
npm install @langchain/openai @langchain/community @langchain/core
```

```typescript
import { SingleStoreVectorStore } from "@langchain/community/vectorstores/singlestore";
import { OpenAIEmbeddings } from "@langchain/openai";

export const run = async () => {
  const vectorStore = await SingleStoreVectorStore.fromTexts(
    ["Hello world", "Bye bye", "hello nice world"],
    [{ id: 2 }, { id: 1 }, { id: 3 }],
    new OpenAIEmbeddings(),
    {
      connectionOptions: {
        host: process.env.SINGLESTORE_HOST,
        port: Number(process.env.SINGLESTORE_PORT),
        user: process.env.SINGLESTORE_USERNAME,
        password: process.env.SINGLESTORE_PASSWORD,
        database: process.env.SINGLESTORE_DATABASE,
      },
    }
  );

  const resultOne = await vectorStore.similaritySearch("hello world", 1);
  console.log(resultOne);
  await vectorStore.end();
};
```

### Metadata Filtering

```typescript
import { SingleStoreVectorStore } from "@langchain/community/vectorstores/singlestore";
import { OpenAIEmbeddings } from "@langchain/openai";

export const run = async () => {
  const vectorStore = await SingleStoreVectorStore.fromTexts(
    ["Good afternoon", "Bye bye", "Boa tarde!", "Até logo!"],
    [
      { id: 1, language: "English" },
      { id: 2, language: "English" },
      { id: 3, language: "Portugese" },
      { id: 4, language: "Portugese" },
    ],
    new OpenAIEmbeddings(),
    {
      connectionOptions: {
        host: process.env.SINGLESTORE_HOST,
        port: Number(process.env.SINGLESTORE_PORT),
        user: process.env.SINGLESTORE_USERNAME,
        password: process.env.SINGLESTORE_PASSWORD,
        database: process.env.SINGLESTORE_DATABASE,
      },
      distanceMetric: "EUCLIDEAN_DISTANCE",
    }
  );

  const resultOne = await vectorStore.similaritySearch("greetings", 1, {
    language: "Portugese",
  });
  console.log(resultOne);
  await vectorStore.end();
};
```

### Vector indexes

SingleStore DB 버전 8.5 이상에서 [ANN vector indexes](https://docs.singlestore.com/cloud/reference/sql-reference/vector-functions/vector-indexing/)를 활용하여 검색 효율성을 향상시키세요.
vector store 객체 생성 시 `useVectorIndex: true`를 설정하여 이 기능을 활성화할 수 있습니다.
또한 vector의 차원이 기본 OpenAI embedding 크기인 1536과 다른 경우 `vectorSize` 매개변수를 적절히 지정해야 합니다.

### Hybrid search

```typescript
import { SingleStoreVectorStore } from "@langchain/community/vectorstores/singlestore";
import { OpenAIEmbeddings } from "@langchain/openai";

export const run = async () => {
  const vectorStore = await SingleStoreVectorStore.fromTexts(
    [
      "In the parched desert, a sudden rainstorm brought relief, as the droplets danced upon the thirsty earth, rejuvenating the landscape with the sweet scent of petrichor.",
      "Amidst the bustling cityscape, the rain fell relentlessly, creating a symphony of pitter-patter on the pavement, while umbrellas bloomed like colorful flowers in a sea of gray.",
      "High in the mountains, the rain transformed into a delicate mist, enveloping the peaks in a mystical veil, where each droplet seemed to whisper secrets to the ancient rocks below.",
      "Blanketing the countryside in a soft, pristine layer, the snowfall painted a serene tableau, muffling the world in a tranquil hush as delicate flakes settled upon the branches of trees like nature's own lacework.",
      "In the urban landscape, snow descended, transforming bustling streets into a winter wonderland, where the laughter of children echoed amidst the flurry of snowballs and the twinkle of holiday lights.",
      "Atop the rugged peaks, snow fell with an unyielding intensity, sculpting the landscape into a pristine alpine paradise, where the frozen crystals shimmered under the moonlight, casting a spell of enchantment over the wilderness below.",
    ],
    [
      { category: "rain" },
      { category: "rain" },
      { category: "rain" },
      { category: "snow" },
      { category: "snow" },
      { category: "snow" },
    ],
    new OpenAIEmbeddings(),
    {
      connectionOptions: {
        host: process.env.SINGLESTORE_HOST,
        port: Number(process.env.SINGLESTORE_PORT),
        user: process.env.SINGLESTORE_USERNAME,
        password: process.env.SINGLESTORE_PASSWORD,
        database: process.env.SINGLESTORE_DATABASE,
      },
      distanceMetric: "DOT_PRODUCT",
      useVectorIndex: true,
      useFullTextIndex: true,
    }
  );

  const resultOne = await vectorStore.similaritySearch(
    "rainstorm in parched desert, rain",
    1,
    { category: "rain" }
  );
  console.log(resultOne[0].pageContent);

  await vectorStore.setSearchConfig({
    searchStrategy: "TEXT_ONLY",
  });
  const resultTwo = await vectorStore.similaritySearch(
    "rainstorm in parched desert, rain",
    1
  );
  console.log(resultTwo[0].pageContent);

  await vectorStore.setSearchConfig({
    searchStrategy: "FILTER_BY_TEXT",
    filterThreshold: 0.1,
  });
  const resultThree = await vectorStore.similaritySearch(
    "rainstorm in parched desert, rain",
    1
  );
  console.log(resultThree[0].pageContent);

  await vectorStore.setSearchConfig({
    searchStrategy: "FILTER_BY_VECTOR",
    filterThreshold: 0.1,
  });
  const resultFour = await vectorStore.similaritySearch(
    "rainstorm in parched desert, rain",
    1
  );
  console.log(resultFour[0].pageContent);

  await vectorStore.setSearchConfig({
    searchStrategy: "WEIGHTED_SUM",
    textWeight: 0.2,
    vectorWeight: 0.8,
    vectorselectCountMultiplier: 10,
  });
  const resultFive = await vectorStore.similaritySearch(
    "rainstorm in parched desert, rain",
    1
  );
  console.log(resultFive[0].pageContent);

  await vectorStore.end();
};
```

## Related

- Vector store [개념 가이드](/oss/integrations/vectorstores)
- Vector store [사용 방법 가이드](/oss/integrations/vectorstores)