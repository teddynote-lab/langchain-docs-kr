---
title: 'Agent Configuration'
description: 'Open Agent Platform에서 에이전트를 구성 가능하게 만들기'
---

# Agent Configuration

Open Agent Platform에서 에이전트를 구성 가능하게 하려면, 에이전트의 구성 가능한 필드에 사용자 정의 configuration metadata를 설정해야 합니다. 현재 세 가지 유형의 구성 가능한 필드가 있습니다:

1. **General Agent Config:** 모델 이름, system prompt, temperature 등과 같은 일반적인 구성 설정으로 구성됩니다. 기본적으로 모든 사용자 정의 구성 가능한 필드는 여기에 포함되어야 합니다.
2. **MCP Tools Config:** 에이전트에 접근 권한을 부여할 MCP server와 tool을 정의하는 config입니다.
3. **RAG Config:** 에이전트에 접근 권한을 부여할 RAG server와 collection name을 정의하는 config입니다.

<Note>
이 섹션은 LangGraph의 구성 가능한 필드에 대한 기본적인 이해가 있다고 가정합니다. 그렇지 않다면, 자세한 정보는 LangGraph 문서([Python](/oss/langgraph/graph-api/#add-runtime-configuration), [TypeScript](https://langchain-ai.github.io/langgraphjs/how-tos/configuration/))를 참조하세요.
</Note>

## General Agent Config

기본적으로 Open Agent Platform은 구성 가능한 객체에 나열된 *모든* 필드를 UI에서 구성 가능한 것으로 표시합니다. 각 필드는 간단한 텍스트 입력을 통해 구성할 수 있습니다. 더 복잡한 구성 가능한 필드 유형(예: boolean, dropdown, slider 등)을 추가하려면, 필드의 `metadata`에 `x_oap_ui_config` 객체를 추가해야 합니다.

이 객체 내부에서 해당 특정 필드에 대한 사용자 정의 UI config를 정의합니다. 사용 가능한 옵션은 다음과 같습니다:

```typescript
export type ConfigurableFieldUIType =
  | "text"
  | "textarea"
  | "number"
  | "boolean"
  | "slider"
  | "select"
  | "json";

/**
 * The type interface for options in a select field.
 */
export interface ConfigurableFieldOption {
  label: string;
  value: string;
}

/**
 * The UI configuration for a field in the configurable object.
 */
export type ConfigurableFieldUIMetadata = {
  /**
   * The label of the field. This will be what is rendered in the UI.
   */
  label: string;
  /**
   * The default value to render in the UI component.
   *
   * @default undefined
   */
  default?: unknown;
  /**
   * The type of the field.
   * @default "text"
   */
  type?: ConfigurableFieldUIType;
  /**
   * The description of the field. This will be rendered below the UI component.
   */
  description?: string;
  /**
   * The validator function to validate the field value. This is a string that will be parsed as a function.
   * You can also include a custom error message to show to the user if the validation fails.
   */
  validator?: {
    /**
     * The validator function to validate the field value.
     */
    fn: string;
    /**
     * The error message to show to the user if the validation fails. If not provided, a default error message will be shown.
     */
    message?: string;
  };
  /**
   * The component specific props. This is only used for certain field types.
   * "slider" - will contain min, max, step
   * "select" - will contain options (array of {label: string, value: string})
   */
  componentProps?: {
    [key: string]: unknown;
  };
};
```

다음은 TypeScript에서 이 구성을 정의하는 방법의 예시입니다:

```typescript TypeScript Configurable [expandable]
import "@langchain/langgraph/zod";
import { z } from "zod";

export const GraphConfiguration = z.object({
  /**
   * The model ID to use for the reflection generation.
   * Should be in the format `provider/model_name`.
   * Defaults to `anthropic/claude-3-7-sonnet-latest`.
   */
  modelName: z
    .string()
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        type: "select",
        default: "anthropic/claude-3-7-sonnet-latest",
        description: "The model to use in all generations",
        options: [
          {
            label: "Claude 3.7 Sonnet",
            value: "anthropic/claude-3-7-sonnet-latest",
          },
          {
            label: "Claude 3.5 Sonnet",
            value: "anthropic/claude-3-5-sonnet-latest",
          },
          {
            label: "GPT 4o",
            value: "openai/gpt-4o",
          },
          {
            label: "GPT 4.1",
            value: "openai/gpt-4.1",
          },
          {
            label: "o3",
            value: "openai/o3",
          },
          {
            label: "o3 mini",
            value: "openai/o3-mini",
          },
          {
            label: "o4",
            value: "openai/o4",
          },
        ],
      },
    }),
  /**
   * The temperature to use for the reflection generation.
   * Defaults to `0.7`.
   */
  temperature: z
    .number()
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        type: "slider",
        default: 0.7,
        min: 0,
        max: 2,
        step: 0.1,
        description: "Controls randomness (0 = deterministic, 2 = creative)",
      },
    }),
  /**
   * The maximum number of tokens to generate.
   * Defaults to `1000`.
   */
  maxTokens: z
    .number()
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        type: "number",
        default: 4000,
        min: 1,
        description: "The maximum number of tokens to generate",
      },
    }),
  systemPrompt: z
    .string()
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        type: "textarea",
        placeholder: "Enter a system prompt...",
        description: "The system prompt to use in all generations",
      },
    }),
});

// ENSURE YOU PASS THE GRAPH CONFIGURABLE SCHEMA TO THE StateGraph:
const workflow = new StateGraph(MyStateSchema, GraphConfiguration)
```

Python에서는 다음과 같이 작성됩니다:

```python Python Configurable [expandable]
from pydantic import BaseModel, Field

class GraphConfigPydantic(BaseModel):
    model_name: str | None = Field(
        default="anthropic:claude-3-7-sonnet-latest",
        metadata={
            "x_oap_ui_config": {
                "type": "select",
                "default": "anthropic:claude-3-7-sonnet-latest",
                "description": "The model to use in all generations",
                "options": [
                    {
                        "label": "Claude 3.7 Sonnet",
                        "value": "anthropic:claude-3-7-sonnet-latest",
                    },
                    {
                        "label": "Claude 3.5 Sonnet",
                        "value": "anthropic:claude-3-5-sonnet-latest",
                    },
                    {"label": "GPT 4o", "value": "openai:gpt-4o"},
                    {"label": "GPT 4o mini", "value": "openai:gpt-4o-mini"},
                    {"label": "GPT 4.1", "value": "openai:gpt-4.1"},
                ],
            }
        }
    )
    temperature: float | None = Field(
        default=0.7,
        metadata={
            "x_oap_ui_config": {
                "type": "slider",
                "default": 0.7,
                "min": 0,
                "max": 2,
                "step": 0.1,
                "description": "Controls randomness (0 = deterministic, 2 = creative)",
            }
        }
    )
    max_tokens: int | None = Field(
        default=4000,
        metadata={
            "x_oap_ui_config": {
                "type": "number",
                "default": 4000,
                "min": 1,
                "description": "The maximum number of tokens to generate",
            }
        }
    )
    system_prompt: str | None = Field(
        default=None,
        metadata={
            "x_oap_ui_config": {
                "type": "textarea",
                "placeholder": "Enter a system prompt...",
                "description": "The system prompt to use in all generations",
            }
        }
    )

# ENSURE YOU PASS THE GRAPH CONFIGURABLE SCHEMA TO THE StateGraph:
workflow = StateGraph(State, config_schema=GraphConfigPydantic)
```

## MCP Tools Config

Open Agent Platform에서 에이전트가 MCP tool로 구성 가능하도록 하려면, 구성 가능한 필드에 특정 `x_oap_config_type` metadata 필드를 설정해야 합니다. 이 필드는 `oap_mcp_tools_config`로 설정되어야 합니다. 구성 가능한 객체의 단일 필드에만 이것을 설정하면 됩니다. 선택적으로, 이 필드에 기본값을 제공할 수 있으며, 사용자가 새 에이전트를 생성할 때 사용됩니다.

다음은 TypeScript의 예시입니다:

```typescript TypeScript Configurable [expandable]
export const MCPConfig = z.object({
  /**
   * The MCP server URL.
   */
  url: z.string(),
  /**
   * The list of tools to provide to the LLM.
   */
  tools: z.array(z.string()),
  /**
   * Whether or not the MCP server requires authentication.
   * This is a field which is set on the client whenever a
   * user creates a new agent. It will be set to true if the
   * `NEXT_PUBLIC_MCP_AUTH_REQUIRED` environment variable is set to `true`,
   * and false otherwise.
   * @default false
   */
  auth_required: z.boolean().optional(),
});

export const GraphConfiguration = z.object({
  /**
   * MCP configuration for tool selection. The key (in this case it's `mcpConfig`)
   * can be any value you want.
   */
  mcpConfig: z
    .lazy(() => MCPConfig)
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        // Ensure the type is `mcp`
        type: "mcp",
        // Add custom tools to default to here:
        // default: {
        //   tools: ["Math_Divide", "Math_Mod"]
        // }
      },
    }),
});
```

Python에서는:

```python Python Configurable [expandable]
class MCPConfig(BaseModel):
    url: str | None = Field(
        default=None,
        optional=True,
    )
    """The URL of the MCP server"""
    tools: list[str] | None = Field(
        default=None,
        optional=True,
    )
    """The tools to make available to the LLM"""
    auth_required: bool | None = Field(
        default=False,
        optional=True,
    )
    """Whether the MCP server requires authentication"""


class GraphConfigPydantic(BaseModel):
    # The key (in this case it's `mcp_config`)
    # can be any value you want.
    mcp_config: MCPConfig | None = Field(
        default=None,
        metadata={
            "x_oap_ui_config": {
                # Ensure the type is `mcp`
                "type": "mcp",
                # Here is where you would set the default tools.
                # "default": {
                #     "tools": ["Math_Divide", "Math_Mod"]
                # }
            }
        }
    )
```

## RAG Config

RAG 구성은 MCP tool과 유사합니다. 구성 가능한 필드에 특정 `x_oap_config_type` metadata 필드를 설정해야 합니다. 이 필드는 `oap_rag_config`로 설정되어야 합니다. 구성 가능한 객체의 단일 필드에만 이것을 설정하면 됩니다.

다음은 TypeScript의 예시입니다:

```typescript TypeScript Configurable [expandable]
export const RAGConfig = z.object({
  /**
   * The LangConnect RAG server URL.
   */
  rag_url: z.string(),
  /**
   * The collections to use for RAG. Will be an
   * array of collection IDs
   */
  collections: z.string().array(),
});

export const GraphConfiguration = z.object({
  /**
   * LangConnect RAG configuration. The key (in this case it's `rag`)
   * can be any value you want.
   */
  rag: z
    .lazy(() => RAGConfig)
    .optional()
    .langgraph.metadata({
      x_oap_ui_config: {
        // Ensure the type is `rag`
        type: "rag",
        // Here is where you would set the default collection. Use collection IDs
        // default: {
        //   collections: [
        //     "fd4fac19-886c-4ac8-8a59-fff37d2b847f",
        //     "659abb76-fdeb-428a-ac8f-03b111183e25",
        //   ]
        // }
      },
    }),
});
```

Python에서는:

```python Python Configurable [expandable]
class RagConfig(BaseModel):
    rag_url: str | None = None
    """The URL of the rag server"""
    collections: list[str] | None = None
    """The collections to use for rag. Will be a list of collection IDs"""


class GraphConfigPydantic(BaseModel):
    # Once again, the key (in this case it's `rag`)
    # can be any value you want.
    rag: RagConfig | None = Field(
        default=None,
        optional=True,
        metadata={
            "x_oap_ui_config": {
                # Ensure the type is `rag`
                "type": "rag",
                # Here is where you would set the default collection. Use collection IDs
                # "default": {
                #     "collections": [
                #         "fd4fac19-886c-4ac8-8a59-fff37d2b847f",
                #         "659abb76-fdeb-428a-ac8f-03b111183e25",
                #     ]
                # },
            }
        }
    )
```

## Troubleshooting

구성 가능한 필드가 OAP UI에 올바르게 표시되지 않는 경우, 다음을 확인하세요:

1. 구성 가능한 필드에 올바른 metadata 필드를 설정했는지 확인하세요.
2. 구성 가능한 필드 schema가 예상되는 schema와 일치하는지 확인하세요.
3. select 필드의 경우, option이 올바르게 형식화되었는지 확인하세요.
4. validator function의 경우, 유효한 JavaScript function인지 확인하세요.
5. 여전히 작동하지 않는다면, `x_oap_ui_config` metadata에 적절한 필드가 설정되어 있는지 확인하세요.