```mdx
---
title: 환경 변수 설정 없이 추적하기
sidebarTitle: 환경 변수 없이 추적
keywords: cloudflare, cloudflare workers, serverless
---

다른 가이드에서 언급했듯이, 다음 환경 변수를 사용하여 추적 활성화, API endpoint, API key 및 추적 project를 구성할 수 있습니다:

* `LANGSMITH_TRACING`
* `LANGSMITH_API_KEY`
* `LANGSMITH_ENDPOINT`
* `LANGSMITH_PROJECT`

사용자 정의 구성으로 실행을 추적해야 하거나, 일반적인 환경 변수를 지원하지 않는 환경(예: Cloudflare Workers)에서 작업하거나, 단순히 환경 변수에 의존하지 않으려는 경우, LangSmith를 사용하면 프로그래밍 방식으로 추적을 구성할 수 있습니다.

<Warning>
`trace` context manager를 사용한 추적의 세밀한 제어에 대한 여러 요청으로 인해, Python SDK 버전 **0.1.95**에서 `with trace`의 **동작을 변경**하여 `LANGSMITH_TRACING` 환경 변수를 준수하도록 했습니다. 자세한 내용은 [릴리스 노트](https://github.com/langchain-ai/langsmith-sdk/releases/tag/v0.1.95)에서 확인할 수 있습니다. 환경 변수 설정 없이 추적을 비활성화/활성화하는 권장 방법은 아래 예제와 같이 `with tracing_context` context manager를 사용하는 것입니다.
</Warning>

- Python: Python에서 이를 수행하는 권장 방법은 `tracing_context` context manager를 사용하는 것입니다. 이는 `traceable`로 주석이 달린 코드와 `trace` context manager 내의 코드 모두에서 작동합니다.
- TypeScript: `traceable` decorator에 client와 `tracingEnabled` flag를 모두 전달할 수 있습니다.

<CodeGroup>

```python Python
import openai
from langsmith import Client, tracing_context, traceable
from langsmith.wrappers import wrap_openai

langsmith_client = Client(
  api_key="YOUR_LANGSMITH_API_KEY",  # This can be retrieved from a secrets manager
  api_url="https://api.smith.langchain.com",  # Update appropriately for self-hosted installations or the EU region
  workspace_id="YOUR_WORKSPACE_ID", # Must be specified for API keys scoped to multiple workspaces
)

client = wrap_openai(openai.Client())

@traceable(run_type="tool", name="Retrieve Context")
def my_tool(question: str) -> str:
  return "During this morning's meeting, we solved all world conflict."

@traceable
def chat_pipeline(question: str):
  context = my_tool(question)
  messages = [
      { "role": "system", "content": "You are a helpful assistant. Please respond to the user's request only based on the given context." },
      { "role": "user", "content": f"Question: {question}\nContext: {context}"}
  ]
  chat_completion = client.chat.completions.create(
      model="gpt-4o-mini", messages=messages
  )
  return chat_completion.choices[0].message.content

# Can set to False to disable tracing here without changing code structure
with tracing_context(enabled=True):
  # Use langsmith_extra to pass in a custom client
  chat_pipeline("Can you summarize this morning's meetings?", langsmith_extra={"client": langsmith_client})
```

```typescript TypeScript
import { Client } from "langsmith";
import { traceable } from "langsmith/traceable";
import { wrapOpenAI } from "langsmith/wrappers";
import { OpenAI } from "openai";

const client = new Client({
    apiKey: "YOUR_API_KEY",  // This can be retrieved from a secrets manager
    apiUrl: "https://api.smith.langchain.com",  // Update appropriately for self-hosted installations or the EU region
});

const openai = wrapOpenAI(new OpenAI());

const tool = traceable((question: string) => {
    return "During this morning's meeting, we solved all world conflict.";
}, { name: "Retrieve Context", runType: "tool" });

const pipeline = traceable(
    async (question: string) => {
        const context = await tool(question);

        const completion = await openai.chat.completions.create({
            model: "gpt-4o-mini",
            messages: [
                { role: "system" as const, content: "You are a helpful assistant. Please respond to the user's request only based on the given context." },
                { role: "user" as const, content: `Question: ${question}\nContext: ${context}`}
            ]
        });

        return completion.choices[0].message.content;
    },
    { name: "Chat", client, tracingEnabled: true }
);

await pipeline("Can you summarize this morning's meetings?");
```

</CodeGroup>

비디오 튜토리얼을 선호하신다면, Introduction to LangSmith Course의 [Alternative Ways to Trace video](https://academy.langchain.com/pages/intro-to-langsmith-preview)를 확인하세요.
```