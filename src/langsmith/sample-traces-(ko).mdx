---
title: trace에 대한 샘플링 비율 설정
sidebarTitle: trace에 대한 샘플링 비율 설정
---

대용량 애플리케이션을 다룰 때, 모든 trace를 LangSmith에 로깅하고 싶지 않을 수 있습니다. 샘플링 비율을 사용하면 로깅되는 trace의 비율을 제어할 수 있어, 관찰 가능성 요구사항과 비용 고려사항 간의 균형을 맞출 수 있습니다.

## 전역 샘플링 비율 설정

<Note>
이 섹션은 LangSmith SDK 또는 LangChain을 사용하는 경우에 해당하며, LangSmith API로 직접 로깅하는 경우에는 해당하지 않습니다.
</Note>

기본적으로 모든 trace는 LangSmith에 로깅됩니다. LangSmith에 로깅되는 trace 수를 다운샘플링하려면, `LANGSMITH_TRACING_SAMPLING_RATE` 환경 변수를 `0`(trace 없음)과 `1`(모든 trace) 사이의 float 값으로 설정하세요. 예를 들어, 다음 환경 변수를 설정하면 trace의 75%가 로깅됩니다.

```bash
export LANGSMITH_TRACING_SAMPLING_RATE=0.75
```

이는 `traceable` decorator와 `RunTree` 객체에 대해 작동합니다.

## client별로 다른 샘플링 비율 설정

특정 `Client` 인스턴스에 샘플링 비율을 설정하고 `tracing_context` context manager를 사용할 수도 있습니다:

```python
from langsmith import Client, tracing_context

# Create clients with different sampling rates
client_1 = Client(tracing_sampling_rate=0.5)  # 50% sampling
client_2 = Client(tracing_sampling_rate=0.25)  # 25% sampling
client_no_trace = Client(tracing_sampling_rate=0.0)  # No tracing

# Use different sampling rates for different operations
with tracing_context(client=client_1):
    # Your code here - will be traced with 50% sampling rate
    agent_1.invoke(...)

with tracing_context(client=client_2):
    # Your code here - will be traced with 25% sampling rate
    agent_1.invoke(...)

with tracing_context(client=client_no_trace):
    # Your code here - will not be traced
    agent_1.invoke(...)
```

이를 통해 작업 수준에서 샘플링 비율을 제어할 수 있습니다.