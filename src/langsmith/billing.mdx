---
title: 계정에서 결제 관리하기
sidebarTitle: 결제 관리
---

이 페이지에서는 LangSmith 조직의 결제 관리 방법을 설명합니다:

- [계정에 결제 설정하기](#set-up-billing-for-your-account): Developer 및 Plus 플랜의 결제 설정 절차를 완료하세요. 레거시 계정에 대한 특별 지침도 포함되어 있습니다.
- [정보 업데이트하기](#update-your-information): 조직의 청구서 이메일 주소, 사업자 정보, 세금 ID를 수정하세요.
- [트레이싱 비용 최적화하기](#optimize-your-tracing-spend): 데이터 보존 관리와 사용량 제한을 통해 비용을 절감하는 방법을 알아보세요.

## 계정에 결제 설정하기

<Note>
이 가이드를 사용하기 전에 다음 사항을 참고하세요:

- [Enterprise](https://www.langchain.com/pricing) 플랜에 관심이 있으시면 [영업팀에 문의](https://www.langchain.com/contact-sales)하세요. 이 가이드는 셀프 서비스 결제 플랜에만 해당됩니다.
- 2024년 4월 2일 가격 정책 도입 이전에 LangSmith 조직을 생성했다면, [마지막 섹션으로 건너뛰세요](#set-up-billing-for-accounts-created-before-pricing-was-introduced-on-april-2-2024).
</Note>

LangSmith 조직의 결제를 설정하려면 **Settings**의 [Usage and Billing](https://smith.langchain.com/settings/payments) 페이지로 이동하세요. 조직의 설정에 따라 다음과 같은 설정 가이드가 있습니다:

- [Developer 플랜](#developer-plan%3A-set-up-billing-on-your-personal-organization)
- [Plus 플랜](#plus-plan%3A-set-up-billing-on-a-shared-organization)
- [2024년 4월 2일 가격 정책 도입 이전에 생성된 계정 설정](#set-up-billing-for-accounts-created-before-pricing-introduction)

### Developer 플랜: 개인 조직에서 결제 설정하기

개인 조직은 신용카드를 추가하기 전까지 월 5,000 트레이스로 제한됩니다. **Plans and Billing** 페이지에서 신용카드를 다음과 같이 추가할 수 있습니다:

1. **Set up Billing**을 클릭하세요.
1. 신용카드 정보를 입력하세요. 이 단계 이후에는 5,000 트레이스 제한이 해제되며, 초과 트레이스에 대해서는 [pricing](https://www.langchain.com/pricing-langsmith) 페이지에 명시된 요금이 청구됩니다.

### Plus 플랜: 공유 조직에서 결제 설정하기

아직 조직을 생성하지 않았다면, 결제 설정 전에 [이 가이드](/langsmith/set-up-a-workspace#set-up-an-organization)를 따라야 합니다. 아래 단계는 이미 새 조직에 있는 경우를 가정합니다.

<Note>
신용카드 정보를 입력하기 전까지는 새 조직을 사용할 수 없습니다. 아래 단계를 완료하면 LangSmith에 완전히 접근할 수 있습니다.
</Note>

1. **Plus** 페이지에서 **Subscribe**를 클릭하세요.
    <Note>
    AI로 스타트업을 구축 중이라면 Startup Plan에서 **Apply Now**를 클릭하세요. 할인 가격과 무료 월간 트레이스 할당을 받을 수 있습니다.
    </Note>
1. 기존 멤버를 검토하세요. 구독 전에 LangSmith에서 청구서에 포함하고 싶지 않은 사용자를 제거할 수 있습니다.
1. 신용카드 정보를 입력하세요. 이후 사업자 정보, 청구서 이메일, 세금 ID를 입력하세요. 조직이 사업자에 속한다면 **This is a business** 체크박스를 선택하고 정보를 입력하세요.

자세한 내용은 [정보 업데이트하기](#update-your-information) 섹션을 참고하세요.

이 단계를 완료하면 조직이 LangSmith의 모든 기능에 접근할 수 있습니다.

### 2024년 4월 2일 가격 정책 도입 이전에 생성된 계정의 결제 설정

2024년 4월 2일 가격 정책 도입 이전에 LangSmith에 가입했다면, 기존 계정을 업그레이드하여 결제를 설정할 수 있습니다. 2024년 7월 8일까지 결제를 설정하지 않았다면, 계정은 월 최대 5,000 트레이스로 제한됩니다.

1. [Settings](https://smith.langchain.com/settings) 페이지로 이동하세요.
2. **Set up Billing**을 클릭하세요.

  ![](/langsmith/images/setup-billing-legacy.png)

3. 신용카드 정보를 입력하세요. Personal 조직이라면 Developer 플랜으로, 공유 조직이라면 Plus 플랜으로 등록됩니다. 자세한 내용은 [Developer](#developer-plan%3A-set-up-billing-on-your-personal-organization) 또는 [Plus](#plus-plan%3A-set-up-billing-on-a-shared-organization) 플랜 가이드를 참고하세요(2단계부터 시작).
4. LangSmith 초기 사용자에게 감사의 의미로 무료 크레딧을 받으세요.

## 정보 업데이트하기

LangSmith 조직의 사업자 정보를 업데이트하려면 **Settings**의 [Usage and Billing](https://smith.langchain.com/settings/payments) 페이지에서 [Plans and Billing](https://smith.langchain.com/settings/payments?tab=2) 탭을 클릭하세요.

<Note>
사업자 정보, 세금 ID, 청구서 이메일은 Plus 및 Startup 플랜에서만 업데이트할 수 있습니다. Free 및 Developer 플랜에서는 이 정보를 수정할 수 없습니다.
</Note>

### 청구서 이메일

![](/langsmith/images/update-invoice-email.png)

청구서 이메일 주소를 업데이트하려면 다음 단계를 따르세요:

1. **Plans and Billing** 탭으로 이동하세요.
2. 결제 수단 아래에 현재 청구서 이메일이 표시된 섹션을 찾으세요.
3. 제공된 필드에 새 청구서 이메일 주소를 입력하세요.
4. 새 이메일 주소가 자동으로 저장됩니다.

이후 모든 청구서는 업데이트된 이메일 주소로 수신됩니다.

### 사업자 정보 및 세금 ID

<Note>
일부 관할 지역에서는 LangSmith가 판매세를 징수해야 합니다. 사업자라면 세금 ID를 제공하면 판매세 면제 자격이 있을 수 있습니다.
</Note>

![](/langsmith/images/update-business-info.png)

조직의 사업자 정보를 업데이트하려면 다음 단계를 따르세요:

1. **Plans and Billing** 탭으로 이동하세요.
2. 청구서 이메일 섹션 아래에 **Business** 체크박스를 찾으세요.
3. 조직이 사업자라면 **Business** 체크박스를 선택하세요.
4. 사업자 정보 입력 섹션이 나타나며, 다음 정보를 입력하거나 업데이트할 수 있습니다:
   - 사업자명
   - 주소
   - 해당 관할 지역의 세금 ID
5. 국가를 선택하면 해당 관할 지역에 맞는 세금 ID 입력란이 나타납니다.
6. 필요한 정보를 입력한 후 **Save** 버튼을 클릭하여 변경 사항을 저장하세요.

이렇게 하면 결제 및 세금 목적에 맞게 사업자 정보가 최신 상태로 유지됩니다.

## 트레이싱 비용 최적화하기

<Check>
트레이싱 비용 최적화 섹션을 진행하기 전에 다음 페이지를 참고하면 도움이 됩니다:

- [데이터 보존 개념 문서](/langsmith/administration-overview#data-retention)
- [사용량 제한 개념 문서](/langsmith/administration-overview#usage-limits)
</Check>

<Note>
이 가이드에서 언급된 일부 기능은 Enterprise 플랜에서는 맞춤형 결제 방식으로 인해 현재 제공되지 않습니다. Enterprise 플랜을 사용 중이고 비용 최적화에 대해 궁금한 점이 있다면 영업 담당자 또는 [support@langchain.dev](mailto:support@langchain.dev)로 문의하세요.
</Note>

LangSmith에서 기존 비용을 최적화하고 미래의 과도한 지출을 방지하는 방법을 배웁니다. 여기에는 다음이 포함됩니다:

1. 데이터 보존 정책으로 기존 비용 절감
2. 사용량 제한으로 미래의 과도한 지출 방지

이 튜토리얼에서는 사용량이 많은 기존 LangSmith 조직을 예시로 사용합니다. 이 예시의 개념을 자신의 조직에 적용할 수 있습니다. 예시 조직에는 배포 단계별로 세 개의 [워크스페이스](/langsmith/administration-overview#workspaces)가 있습니다 (`Dev`, `Staging`, `Prod`):

![](/langsmith/images/workspaces.png)

### 현재 사용량 파악하기

최적화 프로세스의 첫 단계는 현재 사용량을 파악하는 것입니다. LangSmith에서는 [사용량 그래프](#usage-graph)와 [청구서](#invoices) 두 가지 방법을 제공합니다.

#### 사용량 그래프

사용량 그래프를 통해 사용 기반 가격 책정 지표별로 얼마나 소비했는지 확인할 수 있습니다. 직접적인 비용은 표시하지 않으며, 이후 임시 청구서에서 확인할 수 있습니다.

**Settings** -> **Usage and Billing** -> **Usage Graph**에서 사용량 그래프를 확인할 수 있습니다.

![](/langsmith/images/usage-graph.png)

이 그래프는 LangSmith가 청구하는 두 가지 사용량 지표를 보여줍니다:

- LangSmith Traces (Base Charge): LangSmith에 전송한 모든 트레이스를 추적합니다.
- LangSmith Traces (Extended Data Retention Upgrades): 400일 데이터 보존이 적용된 트레이스를 추적합니다.

자세한 내용은 [데이터 보존 개념 문서](/langsmith/administration-overview#data-retention)를 참고하세요. 이 그래프들이 동일하게 보이는 점은 튜토리얼 후반에 다시 살펴봅니다.

LangSmith Traces 사용량은 워크스페이스별로 측정됩니다. 워크스페이스는 개발 환경(예시처럼) 또는 조직 내 팀을 나타내는 경우가 많습니다. LangSmith 관리자는 각 단위별로 비용을 세분화해 파악할 수 있습니다. 비용을 절감하고 싶다면, 우선 비용의 대부분을 차지하는 환경에 집중하는 것이 가장 효과적입니다.

#### 청구서

트레이스 기준의 사용량을 파악했다면, 이제 이를 비용으로 환산해야 합니다. **Invoices** 탭으로 이동하세요. 화면에 표시되는 첫 번째 청구서는 이번 달의 임시 청구서로, 현재까지의 누적 비용을 보여줍니다.

![](/langsmith/images/invoice-investigation-v2.gif)

<Note>
LangSmith의 Usage Graph와 Invoice에서는 `tenant_id`가 워크스페이스 ID를 의미합니다. 두 용어는 동일하게 사용됩니다.
</Note>

GIF에서 LangSmith Traces의 비용이 "tenant_id"(즉, 워크스페이스 ID)별로 구분되어 표시되는 것을 볼 수 있습니다. 즉, 각 워크스페이스별로 트레이싱 비용을 추적할 수 있습니다. 6월 초 며칠 동안 총 약 \$2,000의 대부분이 프로덕션 워크스페이스에서 발생했습니다. 또한 해당 워크스페이스의 비용 대부분은 extended data retention trace 업그레이드에서 발생했습니다.

이러한 업그레이드는 두 가지 이유로 발생합니다:

1. extended data retention tracing을 사용하면 기본적으로 트레이스가 400일간 보존됩니다.
2. base data retention tracing을 사용하면서 트레이스의 데이터 보존을 자동으로 연장하는 기능을 사용합니다. ([Auto-Upgrade 개념 문서 참고](/langsmith/administration-overview#data-retention).)

일일 총 트레이스 수와 extended retention 트레이스 수가 동일하므로, 이 조직은 모든 곳에서 extended data retention tracing을 사용하는 것으로 보입니다. 따라서 우선 보존 설정을 최적화하는 것이 좋습니다.

### 최적화 1: 데이터 보존 관리

LangSmith는 트레이스의 [데이터 보존](/langsmith/administration-overview#data-retention) 기간에 따라 요금을 다르게 부과합니다. 단기 보존 트레이스는 장기 보존 트레이스보다 훨씬 저렴합니다. 이 최적화에서는 과거 데이터 관찰성을 희생하지 않으면서 데이터 보존 설정을 최적화하는 방법과 그 효과를 확인합니다.

#### 신규 프로젝트의 조직 수준 보존 기본값 변경

**Usage configuration** 탭에서 조직 수준의 보존 설정을 확인하세요. 이 설정을 변경하면 조직 내 모든 워크스페이스에서 앞으로 생성되는 **신규 프로젝트**에 적용됩니다.

<Note>
이전 조직은 호환성을 위해 기본값이 **Extended**로 설정되어 있을 수 있습니다. 2024년 6월 3일 이후 생성된 조직은 기본값이 **Base**입니다.
</Note>

![](/langsmith/images/p1orgretention-v2.png)

#### 프로젝트 수준 보존 기본값 변경

데이터 보존 설정은 트레이싱 프로젝트 페이지에서 프로젝트별로 조정할 수 있습니다.

**Projects** > ***프로젝트명*** > **Retention** 선택 후, 프로젝트의 기본 보존 기간을 **Base**로 변경하세요. 이 설정은 **이후 트레이스**에만 적용되어 보존 및 가격에 영향을 줍니다.

![](/langsmith/images/p1projectretention.png)

#### 일부 트레이스에 extended data retention 적용

모든 트레이스가 14일 후 만료되는 것을 원하지 않을 수 있습니다. [automation rule](/langsmith/rules)을 생성하여 특정 기준에 맞는 트레이스의 보존 기간을 자동으로 연장할 수 있습니다. 예를 들어 다음과 같은 트레이스에 extended data retention을 적용할 수 있습니다:

* 전체 트레이스의 10%: 장기 분석 또는 트렌드 분석용
* 오류가 발생한 트레이스: 문제 조사 및 디버깅용
* 특정 메타데이터가 있는 트레이스: 특정 기능 또는 사용자 흐름의 장기 분석용

설정 방법:

1. **Projects** > ***프로젝트명*** > **+ New** > **New Automation** 선택
2. 규칙 이름을 지정하고, 필요에 따라 필터 또는 샘플링 비율을 적용하세요. 필터 구성에 대한 자세한 내용은 [필터링 기술](/langsmith/filter-traces-in-application#filter-operators)을 참고하세요.

<Note>
automation rule이 [trace](/langsmith/observability-concepts#traces) 내의 어떤 [run](/langsmith/observability-concepts#runs)과 일치하면, 해당 트레이스의 모든 run이 400일간 보존되도록 업그레이드됩니다.
</Note>

// 아래 예시는 전체 트레이스의 10%를 extended data retention으로 유지하는 설정입니다.

![](/langsmith/images/P2SampleTraces.png)

400일보다 더 오래 일부 트레이스를 데이터 수집 목적으로 유지하고 싶다면, 일부 run을 원하는 데이터셋으로 전송하는 추가 run rule을 만들 수 있습니다. 데이터셋은 트레이스 입력 및 출력을(예: key-value 데이터셋) 저장하며, 트레이스가 삭제된 후에도 영구적으로 보존됩니다.

#### 7일 후 결과 확인

일일 총 트레이스 수는 동일하지만, extended data retention 트레이스 수는 크게 줄었습니다. 청구서에서는 지난 7일간 비용이 약 \$900로, 이전 4일간 \$2,000에서 크게 감소했습니다. 하루당 약 75%의 비용 절감 효과입니다.

![](/langsmith/images/p1endresultinvoice-v2.png)

### 최적화 2: 사용량 제한

이전 섹션에서는 데이터 보존 설정을 관리하여 **기존 비용을 최적화**했습니다. 이번 섹션에서는 사용량 제한을 통해 **미래의 과도한 지출을 방지**합니다.

LangSmith에는 두 가지 사용량 제한이 있습니다: 전체 트레이스와 extended retention 트레이스. 이는 [사용량 그래프](#usage-graph)에서 추적되는 두 가지 지표에 해당합니다. 두 제한을 함께 사용하면 비용을 세밀하게 제어할 수 있습니다.

제한을 설정하려면 **Settings** -> **Usage and Billing** -> **Usage configuration**으로 돌아가세요. 페이지 하단의 표에서 워크스페이스별로 사용량 제한을 설정할 수 있습니다. 각 워크스페이스별로 두 가지 제한과 비용 추정치가 표시됩니다.

![](/langsmith/images/p2usagelimitsempty-v2.png)

비용의 대부분이 발생하는 프로덕션 사용량부터 제한을 설정하세요.

#### 적절한 전체 트레이스 제한 설정

전체 트레이스 제한은 LangSmith에 전송할 것으로 예상되는 트레이스 부하에 따라 결정해야 합니다. 성장 가능성도 고려하는 것이 중요합니다. 예를 들어:

- **현재 부하**: gen AI 애플리케이션이 초당 1.2~1.5회 호출되며, 각 API 요청마다 트레이스가 생성되어 하루 약 100,000~130,000 트레이스가 기록됩니다.
- **예상 부하 증가**: 가까운 미래에 두 배로 증가할 것으로 예상됩니다.

이 가정에서 대략적인 제한을 계산할 수 있습니다:

```python
# 하루 예상 트레이스 수 계산 예시
current_traces_per_day = 130_000
expected_growth_factor = 2
limit_per_day = current_traces_per_day * expected_growth_factor
limit_per_month = limit_per_day * 30
print(limit_per_month)  # 약 7,800,000
```

// 위 코드는 월간 트레이스 제한 계산 예시입니다.

**Prod** 행 오른쪽의 편집 아이콘을 클릭하여 제한을 입력하세요.

![](/langsmith/images/p2alllimitonly-v2.png)

<Note>
extended data retention traces 제한 없이 설정하면, 최대 비용 추정치는 모든 트레이스가 extended data retention을 사용하는 것으로 가정합니다.
</Note>

#### extended data retention 제한으로 최대 비용 절감

[최적화 1](#optimization-1-manage-data-retention)에서 비용 절감의 핵심은 데이터 보존 관리임을 배웠습니다. 제한도 마찬가지입니다. 전체 트레이스 중 약 10%만 14일 이상 보존하고 싶다면, 고보존 트레이스의 최대 개수를 제한할 수 있습니다. 예를 들어 `.10 * 7,800,000 = 780,000`입니다.

![](/langsmith/images/p2bothlimits-v2.png)

최대 비용이 월 \~40,000달러에서 \~7,500달러로 줄어듭니다. 더 이상 많은 고비용 데이터 보존 업그레이드를 허용하지 않으므로, 신규 사용자가 실수로 비용을 급증시키는 것을 방지할 수 있습니다.

<Note>
extended data retention 제한에 도달하면 트레이스 외의 일부 기능이 작동하지 않을 수 있습니다. 이 기능을 사용할 계획이라면 [기능 및 부작용](/langsmith/administration-overview#side-effects-of-extended-data-retention-traces-limit)을 참고하세요.
</Note>

#### dev/staging 제한 설정 및 전체 워크스페이스별 총 사용량 제한 확인

`dev` 및 `staging` 환경에도 비슷한 논리로, 각 워크스페이스의 사용량 제한을 프로덕션 제한의 10%로 설정할 수 있습니다.

이 사용 패턴에서는 잘 동작하지만, LangSmith에서 dev 및 staging 제한을 잘 설정하는 방법은 사용 사례에 따라 다를 수 있습니다. 예를 들어, dev 또는 staging에서 CI/CD의 일부로 eval을 실행한다면, 테스트 실패를 방지하기 위해 사용량 제한을 더 유연하게 설정할 수 있습니다.

제한을 설정하면 LangSmith에서 모든 워크스페이스의 최대 비용 추정치를 보여줍니다:

![](/langsmith/images/p2totalspendlimits-v2.png)

비용 추정치를 활용해 청구서 총액을 계획할 수 있습니다.

### 요약

비용 최적화에 대해 추가로 궁금한 점이 있다면 [support@langchain.dev](mailto:support@langchain.dev)로 문의하세요.