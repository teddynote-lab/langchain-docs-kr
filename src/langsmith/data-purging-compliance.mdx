---
title: 규정 준수를 위한 데이터 삭제
sidebarTitle: 규정 준수를 위한 데이터 삭제
---

이 가이드는 데이터가 LangSmith Cloud 서버에 도달한 후 개인정보 보호 목표를 달성하는 데 도움이 되는 다양한 기능을 다룹니다.

## 데이터 보존

LangSmith는 규정 준수 및 스토리지 관리를 지원하기 위해 자동 데이터 보존 기능을 제공합니다. 데이터 보존 정책은 조직 및 프로젝트 수준에서 구성할 수 있습니다.

데이터 보존 구성 및 관리에 대한 자세한 내용은 [데이터 보존 개념](/langsmith/administration-overview#data-retention) 문서를 참조하세요.

## Trace 삭제

API를 사용하여 trace 삭제를 완료할 수 있습니다. API는 trace를 삭제하는 두 가지 방법을 지원합니다:

1. **Trace ID 및 session ID로 삭제**: trace ID 목록과 해당 session ID를 제공하여 특정 trace를 삭제합니다 (요청당 최대 1000개의 trace)
2. **Metadata로 삭제**: 지정된 metadata 키-값 쌍 중 하나와 일치하는 workspace 전체의 trace를 삭제합니다

자세한 내용은 [API 사양](https://api.smith.langchain.com/redoc#tag/run/operation/delete_runs_api_v1_runs_delete_post)을 참조하세요.

<Warning>
모든 trace 삭제는 모든 데이터 스토리지에서 피드백, 집계 및 통계와 같은 관련 엔티티를 삭제합니다.
</Warning>

### 삭제 타임라인

Trace 삭제는 사용량이 적은 시간대에 처리되며 즉시 이루어지지 않으며, 일반적으로 몇 시간 이내에 완료됩니다. 삭제 확인은 제공되지 않으므로 데이터가 제거되었는지 확인하려면 데이터를 다시 쿼리해야 합니다.

### 특정 trace 삭제

단일 session에서 trace ID로 특정 trace를 삭제하려면:

```bash
curl -X POST "https://api.smith.langchain.com/api/v1/runs/delete" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "run_ids": ["trace-id-1", "trace-id-2", "trace-id-3"],
    "session_id": "session-id-1"
  }'
```

### Metadata로 삭제

Metadata로 삭제할 때:

- 키/값 쌍의 `metadata` 객체를 허용합니다. KV 쌍 매칭은 **or** 조건을 사용합니다. Trace는 metadata에 지정된 키-값 쌍 중 **하나라도** 있으면 일치합니다 (모두가 아님)
- Metadata로 삭제할 때 session id를 지정할 필요가 없습니다. 삭제는 workspace 전체에 적용됩니다.

Workspace 전체에서 metadata를 기반으로 trace를 삭제하려면 (metadata 키-값 쌍 중 **하나라도** 일치):

```bash
curl -X POST "https://api.smith.langchain.com/api/v1/runs/delete" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "metadata": {
      "user_id": "user123",
      "environment": "staging"
    }
  }'
```

이렇게 하면 metadata에 `user_id: "user123"` **또는** `environment: "staging"`이 있는 trace가 삭제됩니다.

<Warning>
요청당 session당 최대 1000개의 trace만 예약할 수 있습니다. 더 큰 규모의 삭제를 위해서는 여러 요청을 해야 합니다.
</Warning>

## Example 삭제

API를 통해 dataset example을 직접 삭제할 수 있으며, 데이터 보존 요구 사항에 따라 soft 및 hard 삭제 방법을 모두 지원합니다.

<Warning>
Hard 삭제는 전체 dataset 기록에서 지정된 example의 모든 버전에서 입력, 출력 및 metadata를 영구적으로 제거합니다.
</Warning>

### Example 삭제는 2단계 프로세스입니다

대량 작업의 경우 example 삭제는 2단계 프로세스를 따릅니다:

#### 1. Metadata로 example 검색

Workspace의 모든 dataset에서 일치하는 metadata가 있는 모든 example을 찾습니다.

[GET /examples](https://api.smith.langchain.com/redoc#tag/examples/operation/read_examples_api_v1_examples_get)

- `as_of`는 timestamp로 명시적으로 지정해야 합니다. `as_of` 날짜 이전에 생성된 example만 반환됩니다

```bash
curl -X GET "https://api.smith.langchain.com/api/v1/examples?as_of=2024-01-01T00:00:00Z" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "metadata": {
      "user_id": "user123",
      "environment": "staging"
    }
  }'
```

이렇게 하면 workspace의 모든 dataset에서 metadata에 `user_id: "user123"` **또는** `environment: "staging"`이 있는 example이 반환됩니다.

#### 2. Example hard 삭제

Example ID를 얻은 후 삭제 요청을 보냅니다. 이렇게 하면 해당 example에 대한 dataset의 모든 버전에서 입력, 출력 및 metadata가 제로화됩니다.

[DELETE /examples](https://api.smith.langchain.com/redoc#tag/examples/operation/delete_examples_api_v1_examples_delete)

- Example ID를 지정하고 요청의 query params에 `"hard_delete": true`를 추가합니다

```bash
curl -X DELETE "https://api.smith.langchain.com/api/v1/examples?hard_delete=true" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "example_ids": ["example-id-1", "example-id-2", "example-id-3"]
  }'
```

### 삭제 유형

#### Soft 삭제 (기본값)

- Dataset에 NULL 입력/출력이 있는 tombstone 항목을 생성합니다
- 기록 데이터를 보존하고 dataset 버전 관리를 유지합니다
- Dataset의 현재 버전에만 영향을 줍니다

#### Hard 삭제

- 모든 dataset 버전에서 입력, 출력 및 metadata를 영구적으로 제거합니다
- 규정 준수에서 모든 버전에 걸쳐 제로화가 필요한 경우 완전한 데이터 제거
- Query parameter에 `"hard_delete": true`를 추가합니다

자세한 내용은 [API 사양](https://api.smith.langchain.com/redoc#tag/examples/operation/delete_examples_api_v1_examples_delete)을 참조하세요.