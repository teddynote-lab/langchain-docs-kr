---
title: 배포 기능이 포함된 LangSmith 자체 호스팅
sidebarTitle: 배포 포함
icon: "server"
---

이 가이드는 자체 호스팅 LangSmith 인스턴스에서 **배포 관리** 기능을 활성화하는 방법을 보여줍니다. 이를 통해 [control plane](/langsmith/control-plane)과 [data plane](/langsmith/data-plane)이 추가되어 LangSmith UI를 통해 직접 에이전트와 애플리케이션을 배포, 확장 및 관리할 수 있습니다.

<Info>**중요**<br></br> 배포 기능이 포함된 LangSmith 자체 호스팅은 [Enterprise](https://langchain.com/pricing) 플랜이 필요합니다. </Info>

<Note>
**이 설정 페이지는 기존 LangSmith 인스턴스에 [deployment](/langsmith/deployments) 기능을 추가하기 위한 것입니다.**

[자체 호스팅 옵션](/langsmith/self-hosted)을 검토하여 다음을 이해하세요:
- [LangSmith (observability)](/langsmith/self-hosted#langsmith): 먼저 설치해야 하는 것.
- [LangSmith with deployment](/langsmith/self-hosted#langsmith-with-deployment): 이 가이드가 활성화하는 것.
- [Standalone Server](/langsmith/self-hosted#standalone-server): UI 없이 사용하는 경량 대안.
</Note>

## 개요

이 가이드는 [Kubernetes 설치 가이드](/langsmith/kubernetes)를 기반으로 합니다. 계속하기 전에 **먼저 해당 가이드를 완료해야 합니다**. 이 페이지는 배포 기능을 활성화하는 데 필요한 추가 설정 단계를 다룹니다:
- LangGraph operator 설치
- ingress 구성
- control plane 연결

## 사전 요구 사항

1. Kubernetes를 사용하고 있어야 합니다.
2. [자체 호스팅 LangSmith](/langsmith/kubernetes) 인스턴스가 실행 중이어야 합니다.
3. [LangGraph CLI](/langsmith/cli)를 사용하여 [애플리케이션을 로컬에서 테스트](/langsmith/local-server)합니다.
4. [LangGraph CLI](/langsmith/cli)를 사용하여 Docker 이미지를 빌드하고(예: `langgraph build`) Kubernetes 클러스터가 액세스할 수 있는 레지스트리에 푸시합니다.
5. `KEDA`가 클러스터에 설치되어 있어야 합니다.
```bash
  helm repo add kedacore https://kedacore.github.io/charts
  helm install keda kedacore/keda --namespace keda --create-namespace
```
6. Ingress 구성
    1. LangSmith 인스턴스에 대한 ingress, gateway를 설정하거나 Istio를 사용해야 합니다. 모든 에이전트는 이 ingress 뒤에 Kubernetes 서비스로 배포됩니다. 인스턴스에 대한 [ingress 설정](/langsmith/self-host-ingress) 가이드를 사용하세요.
7. 여러 배포를 위한 클러스터 여유 공간이 있어야 합니다. 새 노드를 자동으로 프로비저닝하기 위해 `Cluster-Autoscaler`를 권장합니다.
8. 유효한 Dynamic PV provisioner 또는 클러스터에서 사용 가능한 PV가 있어야 합니다. 다음을 실행하여 확인할 수 있습니다:
```bash
  kubectl get storageclass
```
9. 네트워크에서 `https://beacon.langchain.com`으로의 Egress가 필요합니다. 이는 air-gapped 모드에서 실행하지 않는 경우 라이선스 검증 및 사용량 보고에 필요합니다. 자세한 내용은 [Egress 문서](/langsmith/self-host-egress)를 참조하세요.

## 설정

1. 자체 호스팅 LangSmith 인스턴스를 구성하는 과정에서 `deployment` 옵션을 활성화합니다. 이렇게 하면 몇 가지 주요 리소스가 프로비저닝됩니다.
    1. `listener`: 배포 변경 사항에 대해 [control plane](/langsmith/control-plane)을 수신하고 다운스트림 CRD를 생성/업데이트하는 서비스입니다.
    2. `LangGraphPlatform CRD`: LangSmith Deployment를 위한 CRD입니다. LangSmith 배포 인스턴스 관리를 위한 spec을 포함합니다.
    3. `operator`: LangSmith CRD의 변경 사항을 처리하는 operator입니다.
    4. `host-backend`: [control plane](/langsmith/control-plane)입니다.

<Note>
v0.12.0부터 `langgraphPlatform` 옵션은 더 이상 사용되지 않습니다. v0.12.0 이후 버전에서는 `config.deployment`를 사용하세요.
</Note>

2. 차트에서 두 개의 추가 이미지가 사용됩니다. 최신 릴리스에 지정된 이미지를 사용하세요.
```bash
  hostBackendImage:
    repository: "docker.io/langchain/hosted-langserve-backend"
    pullPolicy: IfNotPresent
  operatorImage:
    repository: "docker.io/langchain/langgraph-operator"
    pullPolicy: IfNotPresent
```
3. langsmith 구성 파일(보통 `langsmith_config.yaml`)에서 `deployment` 옵션을 활성화합니다. 유효한 ingress 설정도 있어야 합니다:
```bash
  config:
    deployment:
      enabled: true
    # As of v0.12.0, this section is deprecated. Use config.deployment for any version after v0.12.0.
    langgraphPlatform:
      enabled: true
      langgraphPlatformLicenseKey: "YOUR_LANGGRAPH_PLATFORM_LICENSE_KEY"
```
4. `values.yaml` 파일에서 `hostBackendImage` 및 `operatorImage` 옵션을 구성합니다(이미지를 미러링해야 하는 경우).
5. [여기](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/values.yaml#L898)에서 기본 템플릿을 재정의하여 에이전트의 기본 템플릿을 구성할 수도 있습니다.
6. [control plane UI](/langsmith/control-plane#control-plane-ui)에서 배포를 생성합니다.