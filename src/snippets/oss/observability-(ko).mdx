## 선택적으로 추적하기

LangSmith의 `tracing_context` context manager를 사용하여 특정 호출이나 애플리케이션의 일부를 추적하도록 선택할 수 있습니다:

:::python
```python
import langsmith as ls

# This WILL be traced
with ls.tracing_context(enabled=True):
    agent.invoke({"messages": [{"role": "user", "content": "Send a test email to alice@example.com"}]})

# This will NOT be traced (if LANGSMITH_TRACING is not set)
agent.invoke({"messages": [{"role": "user", "content": "Send another email"}]})
```
:::

:::js
```ts
import { LangChainTracer } from "@langchain/core/tracers/tracer_langchain";

// This WILL be traced
const tracer = new LangChainTracer();
await agent.invoke(
  {
    messages: [{role: "user", content: "Send a test email to alice@example.com"}]
  },
  { callbacks: [tracer] }
);

// This will NOT be traced (if LANGSMITH_TRACING is not set)
await agent.invoke(
  {
    messages: [{role: "user", content: "Send another email"}]
  }
);
```
:::

## project에 로그 기록하기

<Accordion title="정적으로">

`LANGSMITH_PROJECT` environment variable을 설정하여 전체 애플리케이션에 대한 사용자 정의 project 이름을 설정할 수 있습니다:

```bash
export LANGSMITH_PROJECT=my-agent-project
```
</Accordion>

<Accordion title="동적으로">

특정 작업에 대해 프로그래밍 방식으로 project 이름을 설정할 수 있습니다:

:::python
```python
import langsmith as ls

with ls.tracing_context(project_name="email-agent-test", enabled=True):
    response = agent.invoke({
        "messages": [{"role": "user", "content": "Send a welcome email"}]
    })
```
:::

:::js
```ts
import { LangChainTracer } from "@langchain/core/tracers/tracer_langchain";

const tracer = new LangChainTracer({ projectName: "email-agent-test" });
await agent.invoke(
  {
    messages: [{role: "user", content: "Send a test email to alice@example.com"}]
  },
  { callbacks: [tracer] }
);
```
:::
</Accordion>

## trace에 metadata 추가하기

사용자 정의 metadata와 tag로 trace에 주석을 달 수 있습니다:

:::python
```python
response = agent.invoke(
    {"messages": [{"role": "user", "content": "Send a welcome email"}]},
    config={
        "tags": ["production", "email-assistant", "v1.0"],
        "metadata": {
            "user_id": "user_123",
            "session_id": "session_456",
            "environment": "production"
        }
    }
)
```

`tracing_context`는 세밀한 제어를 위해 tag와 metadata도 허용합니다:

```python
with ls.tracing_context(
    project_name="email-agent-test",
    enabled=True,
    tags=["production", "email-assistant", "v1.0"],
    metadata={"user_id": "user_123", "session_id": "session_456", "environment": "production"}):
    response = agent.invoke(
        {"messages": [{"role": "user", "content": "Send a welcome email"}]}
    )
```
:::

:::js
```ts
import { LangChainTracer } from "@langchain/core/tracers/tracer_langchain";

const tracer = new LangChainTracer({ projectName: "email-agent-test" });
await agent.invoke(
  {
    messages: [{role: "user", content: "Send a test email to alice@example.com"}]
  },
  config: {
    tags: ["production", "email-assistant", "v1.0"],
    metadata: {
      userId: "user123",
      sessionId: "session456",
      environment: "production"
    }
  },
);

```
:::

이 사용자 정의 metadata와 tag는 LangSmith의 trace에 첨부됩니다.


<Tip>
agent를 디버그, 평가 및 모니터링하기 위해 trace를 사용하는 방법에 대해 자세히 알아보려면 [LangSmith 문서](/langsmith/home)를 참조하세요.
</Tip>